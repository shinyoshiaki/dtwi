(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{5689:function(e,t,n){e.exports=n(6267)},5917:function(e,t){},5919:function(e,t){},5951:function(e,t){},5952:function(e,t){},6166:function(e,t){},6267:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(41),o=n(45),c=n(114),l=n(408),s=n.n(l),u=n(409),d=n(410),p=n.n(d),f=n(262),h=n(60),m=n(50),v={targetUrl:void 0,node:void 0,kad:void 0},b={targetUrl:"targetUrl",node:"node",kad:"kad"},g={SET_VALUE:"SET_VALUE"};function E(e,t,n){n({type:g.SET_VALUE,data:{key:e,value:t}})}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g.SET_VALUE:return Object(m.a)({},e,Object(h.a)({},t.data.key,t.data.value));default:return e}}var O=n(18),k=n.n(O),w=n(35),j=n(39),C=n.n(j),x=n(111),I=n.n(x);function T(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{pic:void 0},r={type:"tweet",id:e,time:t,msg:n,hash:void 0,pic:void 0};return r.hash=I()(JSON.stringify(r)).toString(),r.pic=a.pic,r}var U={myTweets:[],lastTweet:void 0,timeline:[],userTweets:{},followIds:[]},_={myTweets:"myTweets",timeline:"timeline",lastTweet:"lastTweet",followIds:"followIds"},S={SET_VALUE:"TWITTER_SET_VALUE",PUSH_ARR:"TWITTER_PUSH_ARR",RESET_USER_TWEET:"TWITTER_RESET_USER_TWEET",ADD_USER_TWEET:"TWITTER_ADD_USER_TWEET",FOLLOW:"TWITTER_FOLLOW"};function M(e){return A.apply(this,arguments)}function A(){return(A=Object(w.a)(k.a.mark(function e(t){var n,a,r,i=arguments;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=i.length>1&&void 0!==i[1]?i[1]:new C.a,(a=i.length>2?i[2]:void 0)({type:S.RESET_USER_TWEET,data:t});case 3:return e.next=5,n.findValue(t).catch(console.log);case 5:if(r=e.sent){e.next=8;break}return e.abrupt("break",17);case 8:if("tweet"!==r.type){e.next=14;break}console.log("find tweet"),D(n,a),t=r.hash,e.next=15;break;case 14:return e.abrupt("break",17);case 15:e.next=3;break;case 17:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function D(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new C.a,t=arguments.length>1?arguments[1]:void 0,n=e.keyValueList,a=[];Object.keys(n).forEach(function(e){var t=n[e];"tweet"===t.type&&a.push(t)});var r=a.sort(function(e,t){return e.time-t.time}).reverse();L(_.timeline,r,t)}function R(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new C.a,n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:U,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{picture:void 0};console.log("tweet module",{opt:r});var i=I()(Math.random().toString()).toString(),o=r.picture?T(t.nodeId,Date.now(),e,{pic:i}):T(t.nodeId,Date.now(),e);a.lastTweet?t.store(t.nodeId,a.lastTweet.hash,o):t.store(t.nodeId,t.nodeId,o),r.picture&&t.storeChunks(t.nodeId,i,r.picture),L(_.lastTweet,o,n),function(e,t,n){n({type:S.PUSH_ARR,data:{key:e,value:t}})}(_.myTweets,o,n),D(t,n)}function L(e,t,n){n({type:S.SET_VALUE,data:{key:e,value:t}})}function F(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S.SET_VALUE:return Object(m.a)({},e,Object(h.a)({},t.data.key,t.data.value));case S.PUSH_ARR:return Object(m.a)({},e,Object(h.a)({},t.data.key,e[t.data.key].concat(t.data.value)));case S.RESET_USER_TWEET:return e.userTweets[t.data]=[],Object(m.a)({},e,{userTweets:e.userTweets});case S.ADD_USER_TWEET:return console.log("twitterjs reducer",{state:e}),e.userTweets[t.data.id].push(t.data),Object(m.a)({},e,{userTweets:e.userTweets});case S.FOLLOW:return e.followIds.includes(t.data)||e.followIds.push(t.data),Object(m.a)({},e,{followIds:e.followIds});default:return e}}var V={findUser:void 0,selectFile:void 0,dmUserId:void 0,loading:!1,nofiticationOpen:!1,nofiticationMessage:""},P={findUser:"findUser",selectFile:"selectFile",dmUserId:"dmUserId",loading:"loading",nofiticationOpen:"nofiticationOpen",nofiticationMessage:"nofiticationMessage"},W={SET_VALUE:"CONDITION_SET_VALUE"};function N(e,t,n){n({type:W.SET_VALUE,data:{key:e,value:t}})}function B(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case W.SET_VALUE:return Object(m.a)({},e,Object(h.a)({},t.data.key,t.data.value));default:return e}}var z={messages:{}},H={SEND_DM:"SEND_DM",RECEIVE_DM:"RECEIVE_DM"};function K(){return(K=Object(w.a)(k.a.mark(function e(t,n){var a,r,i,o=arguments;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>2&&void 0!==o[2]?o[2]:new C.a,r=o.length>3?o[3]:void 0,i=o.length>4&&void 0!==o[4]?o[4]:{file:void 0,filename:void 0},e.next=5,a.send(t,{text:n}).catch(console.log);case 5:if(e.sent){e.next=8;break}return e.abrupt("return");case 8:if(r({type:H.SEND_DM,data:{nodeId:t,text:n}}),!i.file){e.next=16;break}return e.next=12,a.send(t,{file:{name:i.filename,value:i.file}}).catch(console.log);case 12:if(e.sent){e.next=15;break}return e.abrupt("return");case 15:r({type:H.SEND_DM,data:{nodeId:t,file:i.file,filename:i.filename}});case 16:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function q(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case H.SEND_DM:var n=t.data;e.messages[n.nodeId]||(e.messages[n.nodeId]=[]);var a=e.messages[n.nodeId];return n.text?a.push({type:"me",text:n.text}):n.file&&a.push({type:"me",file:n.file,filename:n.filename}),Object(m.a)({},e,{messages:e.messages});case H.RECEIVE_DM:var r=t.data;e.messages[r.nodeId]||(e.messages[r.nodeId]=[]);var i=e.messages[r.nodeId];return r.text?i.push({type:"you",text:r.text}):r.file&&i.push({type:"you",file:r.file,filename:r.filename}),Object(m.a)({},e,{messages:e.messages});default:return e}}var J=p()(),G=Object(f.routerMiddleware)(J);var Q=n(6272),X=n(6271),Y=n(7),Z=n(8),$=n(10),ee=n(9),te=n(11),ne=n(5),ae=n(38),re=function(e){function t(){return Object(Y.a)(this,t),Object($.a)(this,Object(ee.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(Z.a)(t,[{key:"render",value:function(){return r.a.createElement(Te,null,function(e){return e=e||{func:{toAccount:function(){}}},r.a.createElement(ne.d,{onClick:e.func.toAccount,style:{marginLeft:"auto"}},r.a.createElement(ae.a,null))})}}]),t}(a.Component);function ie(e){return console.log("blob blob",e),new Promise(function(t,n){var a=[],r=new FileReader,i=File.prototype.slice,o=16384,c=Math.ceil(e.size/o),l=0;function s(){var t=l*o,n=t+o>=e.size?e.size:t+o;r.readAsArrayBuffer(i.call(e,t,n))}r.onerror=function(e){console.log("get slice blob error",e),n()},r.onload=function(e){a.push(e.target.result),++l<c?s():(console.log("getfileslice",{arr:a}),t(a))},s()})}var oe=function(e){function t(){var e,n;Object(Y.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object($.a)(this,(e=Object(ee.a)(t)).call.apply(e,[this].concat(r)))).label="",n.set=function(){},n.handleFile=function(){var e=Object(w.a)(k.a.mark(function e(t){var a,r;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.target.files[0]){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,ie(a).catch(console.log);case 5:if(r=e.sent){e.next=8;break}return e.abrupt("return");case 8:console.log("btn pic file",{result:r}),n.set(r,a.name);case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n}return Object(te.a)(t,e),Object(Z.a)(t,[{key:"render",value:function(){var e=this.props,t=e.val,n=e.func;return t&&n&&(this.label=t.btnpicfile_label,this.set=n.btnpicfile_set),r.a.createElement("div",null,r.a.createElement("input",{type:"file",id:"raised-button-file",style:{display:"none"},onChange:this.handleFile}),r.a.createElement("label",{htmlFor:"raised-button-file"},r.a.createElement(ne.b,{raised:!0,component:"span"},this.label)))}}]),t}(a.Component);function ce(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{btnpicfile_label:"picture"},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{btnpicfile_set:function(){}};return r.a.createElement(oe,{val:e,func:t})}var le=function(e){function t(){var e,n;Object(Y.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object($.a)(this,(e=Object(ee.a)(t)).call.apply(e,[this].concat(r)))).state={target:""},n.handlePicFile=function(e){n.file=e},n}return Object(te.a)(t,e),Object(Z.a)(t,[{key:"render",value:function(){var e=this,t=this.props.closeModal;return r.a.createElement(Te,null,function(n){return n=n||{func:{excuteTweet:function(){}},val:{}},r.a.createElement("div",{style:{margin:10}},r.a.createElement(ne.o,{label:"tweet",multiline:!0,margin:"normal",variant:"outlined",rows:"6",style:{width:"100%"},value:e.state.target,onChange:function(t){e.setState({target:t.target.value})}}),r.a.createElement("br",null),r.a.createElement("div",{style:{bottom:0}},r.a.createElement("div",{style:{float:"left"}},ce({btnpicfile_label:"picture"},{btnpicfile_set:e.handlePicFile})),r.a.createElement(ne.b,{style:{float:"right"},onClick:function(){n.func.excuteTweet(e.state.target,e.file),e.setState({target:""}),t()}},"tweet")))})}}]),t}(a.Component);var se=function(e){function t(){var e,n;Object(Y.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object($.a)(this,(e=Object(ee.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1},n.handleOpen=function(){n.setState({open:!0})},n.handleClose=function(){n.setState({open:!1})},n}return Object(te.a)(t,e),Object(Z.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(ne.b,{onClick:this.handleOpen},"tweet"),r.a.createElement(ne.f,{"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",open:this.state.open,onClose:this.handleClose,style:{display:"flex"}},r.a.createElement("div",{style:{width:"60%",height:280,flex:"0 1 auto",margin:"auto",background:"white"}},r.a.createElement("div",null,r.a.createElement(ne.d,{onClick:this.handleClose,style:{float:"right"}},r.a.createElement(ae.d,null)),r.a.createElement(ne.q,{variant:"h5",style:{textAlign:"center"}},"\u30c4\u30a4\u30fc\u30c8\u3059\u308b")),r.a.createElement("br",null),(e=this.handleClose,r.a.createElement(le,{closeModal:e})))));var e}}]),t}(a.Component);var ue=function(e){function t(){var e,n;Object(Y.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object($.a)(this,(e=Object(ee.a)(t)).call.apply(e,[this].concat(r)))).toAccount=function(){var e=n.props.history;console.log("this.props",n.props),e&&e.push("/account")},n}return Object(te.a)(t,e),Object(Z.a)(t,[{key:"render",value:function(){return r.a.createElement(Te,null,function(e){return e=e||{func:{reload:function(){}},val:{}},r.a.createElement(ne.d,{onClick:function(){e.func.reload()},style:{marginLeft:"auto"}},r.a.createElement(ae.c,null))})}}]),t}(a.Component),de=function(e){function t(){var e,n;Object(Y.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object($.a)(this,(e=Object(ee.a)(t)).call.apply(e,[this].concat(r)))).state={target:""},n}return Object(te.a)(t,e),Object(Z.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(Te,null,function(t){return t=t||{func:{searchUser:function(e){console.log({id:e})}}},r.a.createElement("div",null,r.a.createElement(ne.e,{placeholder:"Search\u2026",value:e.state.target,onChange:function(t){e.setState({target:t.target.value})},style:{width:"20%"}}),r.a.createElement(ne.d,{onClick:function(){t.func.searchUser(e.state.target),e.setState({target:""})}},r.a.createElement(ae.e,null)))})}}]),t}(a.Component),pe=function(e){function t(){var e,n;Object(Y.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object($.a)(this,(e=Object(ee.a)(t)).call.apply(e,[this].concat(r)))).state={tab:0},n.handleChange=function(e,t){n.setState({tab:t})},n.titles=[],n.nodeId="",n.pages=[],n}return Object(te.a)(t,e),Object(Z.a)(t,[{key:"render",value:function(){var e=this.props,t=e.value,n=e.func;t&&n&&(this.titles=t.titles,this.pages=t.pages,this.nodeId=t.nodeId);var a=this.state.tab;return r.a.createElement("div",{style:{flexGrow:1}},r.a.createElement(ne.a,{position:"static",style:{backgroundColor:"white"}},r.a.createElement(ne.p,null,r.a.createElement(ne.n,{value:a,onChange:this.handleChange,style:{color:"black"}},this.titles?this.titles.map(function(e,t){return r.a.createElement(ne.h,{label:e,key:t})}):void 0),r.a.createElement(ue,null),r.a.createElement("div",{style:{color:"black",width:"10%"}}," ",this.nodeId),r.a.createElement(de,null),r.a.createElement(re,null),r.a.createElement(se,null))),this.pages?this.pages.map(function(e,t){return a===t&&e}):void 0)}}]),t}(r.a.Component);var fe=function(e,t){if(t&&t.kad)return console.log("findpicture",{url:e}),new Promise(function(n,a){function r(){return(r=Object(w.a)(k.a.mark(function t(){var r,i,o=arguments;return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=o.length>0&&void 0!==o[0]?o[0]:new C.a,!Object.keys(r.keyValueList).includes(e)){t.next=6;break}console.log("fownd picture",r.keyValueList[e]);try{n(window.URL.createObjectURL(new Blob(r.keyValueList[e].chunks)))}catch(c){a("findpicture blob error",{error:c})}t.next=12;break;case 6:return console.log("findpicture findvalue"),t.next=9,r.findValue(e).catch(console.log);case 9:(i=t.sent)||a("file not fownd");try{console.log("findpicture findvalue",{result:i}),n(window.URL.createObjectURL(new Blob(i.chunks)))}catch(c){a("findpicture blob error",{error:c},{result:i})}case 12:case"end":return t.stop()}},t,this)}))).apply(this,arguments)}!function(){r.apply(this,arguments)}(t.kad)})},he=function(e){function t(e){var n;Object(Y.a)(this,t),(n=Object($.a)(this,Object(ee.a)(t).call(this,e))).state={imgsrc:void 0};var a=n.props.imageUrl;return n.imageUrl=a,n}return Object(te.a)(t,e),Object(Z.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.imageUrl;console.log("picture didmount",{imageUrl:t}),Object(w.a)(k.a.mark(function n(){var a;return k.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!t){n.next=5;break}return n.next=3,fe(t,e.p2p).catch(console.log);case 3:(a=n.sent)&&e.setState({imgsrc:a});case 5:case"end":return n.stop()}},n,this)}))()}},{key:"componentDidUpdate",value:function(){var e=this,t=this.props.imageUrl;console.log("picture didupdate",{imageUrl:t}),Object(w.a)(k.a.mark(function n(){var a;return k.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t===e.imageUrl){n.next=7;break}return e.imageUrl=t,console.log("componentDidUpdate find"),n.next=5,fe(t,e.p2p).catch(console.log);case 5:(a=n.sent)&&e.setState({imgsrc:a});case 7:case"end":return n.stop()}},n,this)}))()}},{key:"render",value:function(){var e=this,t=this.props.imageUrl;return r.a.createElement(ge,null,function(n){return n=n||{func:{},val:{p2p:{}}},e.p2p=n.val.p2p,r.a.createElement("div",null,t,r.a.createElement("img",{src:e.state.imgsrc,alt:t,width:"70%"}))})}}]),t}(a.Component);var me=function(e){function t(){return Object(Y.a)(this,t),Object($.a)(this,Object(ee.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(Z.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.tweet,a=t.index;return r.a.createElement(ge,null,function(t){return t=t||{func:{onClickId:function(){}},val:{}},r.a.createElement("div",{style:{border:"1px solid",borderRadius:4,borderWidth:.5,borderColor:"#d6d7da",margin:3},key:a},r.a.createElement(ne.d,{onClick:e.toAccount},r.a.createElement(ae.a,null)),r.a.createElement(ne.b,{onClick:function(){t.func.onClickId(n.id)}},n.id),r.a.createElement("br",null),r.a.createElement("div",{style:{float:"right",marginRight:20,marginBottom:20}},new Date(n.time).toString()),r.a.createElement("br",null),r.a.createElement("div",{style:{marginLeft:50}},n.msg,r.a.createElement("br",null),n.pic?(i=n.pic,console.log("setpicture",{imageUrl:i}),r.a.createElement(he,{imageUrl:i,key:i})):void 0),r.a.createElement("br",null),r.a.createElement(ne.b,null,"name"),r.a.createElement(ne.b,null,"name"),r.a.createElement(ne.b,null,"name"),r.a.createElement("br",null));var i})}}]),t}(a.Component);var ve=Object(a.createContext)(),be=ve.Provider,ge=ve.Consumer,Ee=function(e){function t(){return Object(Y.a)(this,t),Object($.a)(this,Object(ee.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(Z.a)(t,[{key:"render",value:function(){var e=this.props,t=e.timeline,n=e.func,a=e.p2p;return console.log("timeline render",{timeline:t}),r.a.createElement(be,{value:{func:n,val:{p2p:a}}},r.a.createElement("div",{style:{width:"50%"}},t.map(function(e,t){return n=e,a=t,r.a.createElement(me,{tweet:n,index:a});var n,a})))}}]),t}(a.Component);function ye(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{onClickId:function(){}};return console.log("settimeline",{timeline:e}),r.a.createElement(Ee,{timeline:e,p2p:t,func:n})}var Oe=n(6270),ke=function(e){function t(){var e,n;Object(Y.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object($.a)(this,(e=Object(ee.a)(t)).call.apply(e,[this].concat(r)))).onClickId=function(e){var t=n.props,a=t.dispatch,r=t.history;e!==t.p2p.kad.nodeId?(N(P.findUser,e,a),r.push("/user")):r.push("/account")},n}return Object(te.a)(t,e),Object(Z.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.twitter,n=e.p2p,a=e.dispatch;!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;e.followIds.forEach(function(){var e=Object(w.a)(k.a.mark(function e(n){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M(n,t.kad,a);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}())}(t,n)}},{key:"render",value:function(){var e=this.props,t=e.twitter,n=e.p2p;return console.log("timeline container render",{twitter:t}),r.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},function(){console.log("timeline test",t.timeline)},ye(t.timeline,n,{onClickId:this.onClickId}))}}]),t}(a.Component),we=Object(Oe.a)(Object(o.b)(function(e){return{twitter:e.twitter,p2p:e.p2p}})(ke)),je=function(e){function t(){return Object(Y.a)(this,t),Object($.a)(this,Object(ee.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(Z.a)(t,[{key:"render",value:function(){var e=this.props.kbuckets,t={};return console.log({kbuckets:e}),e&&e.forEach(function(e,n){if(e.length>0){var a="";e.forEach(function(e){a+=e.nodeId+" , "}),t[n]=a}}),r.a.createElement("div",{style:{margin:"20px"}},r.a.createElement(ne.i,null,r.a.createElement(ne.l,null,r.a.createElement(ne.m,null,r.a.createElement(ne.k,null,"index"),r.a.createElement(ne.k,null,"nodes"))),r.a.createElement(ne.j,null,Object.keys(t).map(function(e,n){var a=t[e];return r.a.createElement(ne.m,{key:n},r.a.createElement(ne.k,null,e),r.a.createElement(ne.k,null,a))}))))}}]),t}(a.Component);var Ce=function(e){function t(){var e,n;Object(Y.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object($.a)(this,(e=Object(ee.a)(t)).call.apply(e,[this].concat(r)))).messages={},n.onClickId=function(e){},n}return Object(te.a)(t,e),Object(Z.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.val,a=t.func;return n&&a&&(this.messages=n.dmlist_messages,this.onClickId=a.dmlist_onClickId),r.a.createElement("div",{style:{width:200}},r.a.createElement("div",null,"dm list"),Object.keys(this.messages).map(function(t,n){var a=e.messages[t];return r.a.createElement("div",{key:n},r.a.createElement(ne.b,{onClick:function(){e.onClickId(t)}},t),a[a.length-1].text)}))}}]),t}(a.Component);var xe=Object(a.createContext)(),Ie=xe.Provider,Te=xe.Consumer,Ue=function(e){function t(){return Object(Y.a)(this,t),Object($.a)(this,Object(ee.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(Z.a)(t,[{key:"render",value:function(){var e,t=this.props,n=t.val,a=t.func;return console.log("main index",this.props),r.a.createElement(Ie,{value:{val:n,func:a}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{titles:[],pages:[],nodeId:""},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r.a.createElement(pe,{value:e,func:t})}({titles:["timeline","dm","kademlia"],pages:[r.a.createElement(we,null),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{dmlist_messages:{}},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{dmlist_onClickId:function(e){}};return console.log("setdmlist",{val:e},{func:t}),r.a.createElement(Ce,{val:e,func:t})}(n,a),(e=n.kbuckets,console.log({kbuckets:e}),r.a.createElement(je,{kbuckets:e}))],nodeId:n.nodeId},{}))}}]),t}(a.Component);var _e=function(e){function t(){var e,n;Object(Y.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object($.a)(this,(e=Object(ee.a)(t)).call.apply(e,[this].concat(r)))).nofiticationOpen=!1,n.nofiticationMessage="",n.nofiticationClose=function(){},n}return Object(te.a)(t,e),Object(Z.a)(t,[{key:"render",value:function(){var e=this.props,t=e.val,n=e.func;return t&&n&&(this.nofiticationOpen=t.nofiticationOpen,this.nofiticationMessage=t.nofiticationMessage,this.nofiticationClose=n.nofiticationClose),r.a.createElement("div",null,r.a.createElement(ne.g,{anchorOrigin:{vertical:"top",horizontal:"center"},open:this.nofiticationOpen,onClose:this.nofiticationClose,message:this.nofiticationMessage}))}}]),t}(a.Component);var Se=function(e,t){var n=e.history,a=e.dispatch;N(P.dmUserId,t,a),n&&n.push("/dm")},Me=function(e){function t(e){var n;Object(Y.a)(this,t),(n=Object($.a)(this,Object(ee.a)(t).call(this,e))).nodeId="",n.excuteTweet=function(e,t){var a=n.props,r=a.dispatch,i=a.p2p,o=a.twitter;R(e,i.kad,r,o,{picture:t})},n.setFile=function(e){var t=n.props.dispatch;N(P.selectFile,e,t)},n.searchUser=function(e){var t=n.props,a=t.dispatch,r=t.p2p,i=t.history;function o(){return(o=Object(w.a)(k.a.mark(function t(){var n,r,o=arguments;return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=o.length>0&&void 0!==o[0]?o[0]:new C.a,N(P.loading,!0,a),console.log("searchUser",{userId:e}),!n.f.getPeerFromnodeId(e)){t.next=10;break}N(P.loading,!1,a),N(P.findUser,e,a),i.push("/user"),t.next=15;break;case 10:return t.next=12,n.findNode(e,n.f.getCloseEstPeer(e)).catch(console.log);case 12:r=t.sent,N(P.loading,!1,a),r&&(N(P.findUser,e,a),i.push("/user"));case 15:case"end":return t.stop()}},t,this)}))).apply(this,arguments)}!function(){o.apply(this,arguments)}(r.kad)},n.toAccount=function(){var e=n.props.history;console.log("this.props",n.props),e&&e.push("/account")},n.nofiticationClose=function(){var e=n.props.dispatch;N(P.nofiticationOpen,!1,e)},n.dmlist_onClickId=function(e){Se(n.props,e)};var a=n.props,r=a.p2p,i=a.history;return n.state={value:0,kbuckets:[]},r.kad||i.push("/"),n}return Object(te.a)(t,e),Object(Z.a)(t,[{key:"componentWillMount",value:function(){var e=this.props.p2p;e.kad&&(this.nodeId=e.kad.nodeId)}},{key:"componentDidMount",value:function(){var e=this.props.p2p;this.listenAddPeer(e.kad)}},{key:"listenAddPeer",value:function(e){var t=this;e&&(console.log("addlister"),e.callback.onAddPeer=function(n){console.log("onaddpeer",{data:n}),t.setState({kbuckets:e.kbuckets})})}},{key:"render",value:function(){var e=this.props,t=e.p2p,n=e.condition,a=e.dm;return console.log("main",{p2p:t}),r.a.createElement("div",null,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{kbuckets:[],nodeId:"",dmlist_messages:{}},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{excuteTweet:function(){},reload:function(){},setFile:function(){},searchUser:function(){},toAccount:function(){},dmlist_onClickId:function(e){}};return r.a.createElement(Ue,{val:e,func:t})}({kbuckets:this.state.kbuckets,nodeId:this.nodeId,dmlist_messages:a.messages},{excuteTweet:this.excuteTweet,reload:{},setFile:this.setFile,searchUser:this.searchUser,toAccount:this.toAccount,dmlist_onClickId:this.dmlist_onClickId}),r.a.createElement(ne.f,{open:n.loading,style:{display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement(ne.c,null)),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{nofiticationOpen:!1,nofiticationMessage:""},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{nofiticationClose:function(){}};return r.a.createElement(_e,{val:e,func:t})}({nofiticationOpen:n.nofiticationOpen,nofiticationMessage:n.nofiticationMessage},{nofiticationClose:this.nofiticationClose}))}}]),t}(r.a.Component),Ae=Object(o.b)(function(e){return{p2p:e.p2p,twitter:e.twitter,condition:e.condition,dm:e.dm}})(Me),De=n(412),Re=n.n(De),Le=n(179),Fe=n.n(Le),Ve=n(133),Pe=n.n(Ve),We=n(178),Ne=n.n(We),Be=n(113),ze=n.n(Be),He=n(181),Ke=n.n(He),qe=n(182),Je=n.n(qe),Ge=n(78),Qe=n.n(Ge),Xe=n(112),Ye=n.n(Xe),Ze=n(180),$e=n.n(Ze),et=n(94),tt=n.n(et),nt=n(110),at=n.n(nt),rt=n(12),it=n.n(rt),ot=function(e){return{layout:Object(h.a)({width:"auto",display:"block",marginLeft:3*e.spacing.unit,marginRight:3*e.spacing.unit},e.breakpoints.up(400+3*e.spacing.unit*2),{width:400,marginLeft:"auto",marginRight:"auto"}),paper:{marginTop:8*e.spacing.unit,display:"flex",flexDirection:"column",alignItems:"center",padding:"".concat(2*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px")},avatar:{margin:e.spacing.unit,backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing.unit},submit:{marginTop:3*e.spacing.unit}}},ct=function(e){function t(){return Object(Y.a)(this,t),Object($.a)(this,Object(ee.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(Z.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.login,i=t.register;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ne.a,null),r.a.createElement("main",{className:n.layout},r.a.createElement(tt.a,{className:n.paper},r.a.createElement(Fe.a,{className:n.avatar},r.a.createElement($e.a,null)),r.a.createElement(at.a,{component:"h1",variant:"h5"},"Dtwi"),r.a.createElement("form",{className:n.form},r.a.createElement(ze.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(Ye.a,null,"Public Key"),r.a.createElement(Qe.a,{autoFocus:!0,onChange:function(t){return e.pubKey=t.target.value}})),r.a.createElement(ze.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(Ye.a,{htmlFor:"password"},"Secret Key"),r.a.createElement(Qe.a,{name:"password",type:"password",id:"password",autoComplete:"current-password",onChange:function(t){return e.secKey=t.target.value}})),r.a.createElement(Ke.a,{control:r.a.createElement(Je.a,{value:"remember",color:"primary"}),label:"Remember me"}),r.a.createElement(Pe.a,{fullWidth:!0,variant:"contained",color:"primary",className:n.submit,onClick:function(){a(e.pubKey,e.secKey)}},"Sign in"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(Pe.a,{fullWidth:!0,variant:"contained",onClick:i},"register")))))}}]),t}(a.Component);var lt=function(e){function t(){var e,n;Object(Y.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object($.a)(this,(e=Object(ee.a)(t)).call.apply(e,[this].concat(r)))).targetAddress="35.196.94.146",n.targetPort=2e4,n.state={videoSrc:void 0,localSrc:void 0},n.connectNode=function(e,t){var a=n.props.dispatch,r="http://".concat(n.targetAddress,":").concat(n.targetPort);console.log(n.targetAddress,{targetUrl:r}),E(b.targetUrl,r,a);var i=new Re.a(n.targetAddress,n.targetPort,{pubkey:e,seckey:t});E(b.node,i,a),E(b.kad,i.kad,a),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new C.a,t=arguments.length>1?arguments[1]:void 0;console.log({kad:e}),e.events.store["twitter.js"]=function(n){console.log("twitter event",{value:n}),"tweet"===n.type&&(console.log("on tweet"),D(e,t))}}(i.kad,a),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new C.a,t=arguments.length>1?arguments[1]:void 0;e.events.p2p["dm.js"]=function(e){var n;n=e.text?{nodeId:e.nodeId,text:e.text}:{nodeId:e.nodeId,file:e.file,filename:e.filename},t({type:H.RECEIVE_DM,data:n}),N(P.nofiticationOpen,!0,t),N(P.nofiticationMessage,"dm comming \u300c".concat(e.text,"\u300d"),t)}}(i.kad,a),n.props.history.push("/main")},n}return Object(te.a)(t,e),Object(Z.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=it()(ot)(ct);return r.a.createElement(n,{login:e,register:t})}(this.connectNode,this.connectNode))}}]),t}(r.a.Component),st=Object(o.b)()(lt),ut=function(e){function t(){var e,n;Object(Y.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object($.a)(this,(e=Object(ee.a)(t)).call.apply(e,[this].concat(r)))).follows=[],n.onClickId=function(e){console.log({id:e})},n}return Object(te.a)(t,e),Object(Z.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.value,a=t.func;return n&&a&&(this.follows=n.follows,this.onClickId=a.onClickId),r.a.createElement("div",{style:{width:200,textAlign:"center"}},r.a.createElement("div",null,"follow list"),this.follows.map(function(t,n){return r.a.createElement("div",null,r.a.createElement(ne.b,{onClick:function(){e.onClickId(t)},key:n,style:{width:"90%"}},t),r.a.createElement("br",null))}))}}]),t}(a.Component);var dt=Object(a.createContext)(),pt=(dt.Provider,dt.Consumer,function(e){function t(){var e,n;Object(Y.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object($.a)(this,(e=Object(ee.a)(t)).call.apply(e,[this].concat(r)))).twitter=[],n.toMain=function(){},n}return Object(te.a)(t,e),Object(Z.a)(t,[{key:"render",value:function(){var e=this.props,t=e.value,n=e.func;return t&&n&&(this.twitter=t.twitter,this.toMain=n.toMain),r.a.createElement("div",null,r.a.createElement(ne.d,{onClick:this.toMain,style:{marginLeft:"auto"}},r.a.createElement(ae.b,null)),r.a.createElement("div",{style:{display:"flex"}},r.a.createElement("div",{style:{width:500}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{follows:[]},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{onClickId:function(e){console.log({id:e})}};return r.a.createElement(ut,{value:e,func:t})}(t,n)),r.a.createElement("div",{style:{flex:1}},ye(this.twitter[_.myTweets],t.p2p)))," ")}}]),t}(a.Component));var ft=function(e){function t(e){var n;Object(Y.a)(this,t),(n=Object($.a)(this,Object(ee.a)(t).call(this,e))).toMain=function(){var e=n.props.history;e&&e.push("/main")},n.onClickId=function(e){var t=n.props,a=t.dispatch,r=t.history;e!==t.p2p.kad.nodeId&&(N(P.findUser,e,a),r.push("/user"))};var a=n.props,r=a.p2p,i=a.history;return r.kad||i.push("/"),n}return Object(te.a)(t,e),Object(Z.a)(t,[{key:"render",value:function(){var e=this.props,t=e.twitter,n=e.p2p;return r.a.createElement("div",null,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{twitter:[],follows:[],p2p:{}},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{toMain:function(){},onClickId:function(){}};return r.a.createElement(pt,{value:e,func:t})}({twitter:t,follows:t[_.followIds],p2p:n},{toMain:this.toMain,onClickId:this.onClickId}))}}]),t}(a.Component),ht=Object(o.b)(function(e){return{p2p:e.p2p,twitter:e.twitter}})(ft),mt=function(e){function t(){var e,n;Object(Y.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object($.a)(this,(e=Object(ee.a)(t)).call.apply(e,[this].concat(r)))).toAccount=function(){var e=n.props.history;console.log("this.props",n.props),e&&e.push("/account")},n}return Object(te.a)(t,e),Object(Z.a)(t,[{key:"render",value:function(){return r.a.createElement(gt,null,function(e){return e=e||{func:{toDm:function(){},follow:function(){}},val:{id:""}},r.a.createElement("div",{style:{border:"1px solid",borderRadius:4,borderWidth:.5,borderColor:"#d6d7da"}},r.a.createElement(ne.d,null,r.a.createElement(ae.a,null)),r.a.createElement(ne.b,null,e.val.id),r.a.createElement("br",null),r.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},r.a.createElement(ne.b,{onClick:function(){e.func.follow(e.val.id)}},"follow"),r.a.createElement(ne.b,{onClick:function(){e.func.toDm(e.val.id)}},"dm")))})}}]),t}(a.Component),vt=Object(a.createContext)(),bt=vt.Provider,gt=vt.Consumer,Et=function(e){function t(){return Object(Y.a)(this,t),Object($.a)(this,Object(ee.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object(Z.a)(t,[{key:"render",value:function(){var e=this.props,t=e.value,n=e.func;return r.a.createElement(bt,{value:{func:n,val:t}},r.a.createElement(ne.d,{onClick:n.toMain,style:{marginLeft:"auto"}},r.a.createElement(ae.b,null)),r.a.createElement("div",{style:{display:"flex"}},r.a.createElement("div",{style:{width:500}},r.a.createElement(mt,null)),r.a.createElement("div",{style:{flex:1}},ye(t.timeline,t.p2p))))}}]),t}(a.Component);var yt=function(e){function t(e){var n;Object(Y.a)(this,t),(n=Object($.a)(this,Object(ee.a)(t).call(this,e))).toMain=function(){var e=n.props.history;e&&e.push("/main")},n.toDm=function(e){var t=n.props,a=t.history,r=t.dispatch;N(P.dmUserId,e,r),a&&a.push("/dm")},n.follow=function(e){!function(e,t){t({type:S.FOLLOW,data:e})}(e,n.props.dispatch)};var a=n.props,r=a.p2p,i=a.history;return r.kad||i.push("/"),n}return Object(te.a)(t,e),Object(Z.a)(t,[{key:"componentDidMount",value:function(){var e=Object(w.a)(k.a.mark(function e(){var t,n,a,r;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props,n=t.condition,a=t.p2p,r=t.dispatch,M(n.findUser,a.kad,r);case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getTargetTweets",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:U,n=[];return t.timeline.forEach(function(t){t.id===e&&n.push(t)}),n}},{key:"render",value:function(){var e=this.props,t=e.twitter,n=e.condition,a=e.p2p,i=this.getTargetTweets(n.findUser,t);return r.a.createElement("div",null,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{timeline:[],id:"",p2p:void 0},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{toMain:function(){},follow:function(){},toDm:function(){}};return r.a.createElement(Et,{value:e,func:t})}({timeline:i,id:n.findUser,p2p:a},{toMain:this.toMain,follow:this.follow,toDm:this.toDm}))}}]),t}(a.Component),Ot=Object(o.b)(function(e){return{p2p:e.p2p,twitter:e.twitter,condition:e.condition}})(yt),kt=(n(6177),n(413)),wt=n(95),jt=n.n(wt),Ct=n(263),xt=n.n(Ct),It=function(e){function t(){var e,n;Object(Y.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object($.a)(this,(e=Object(ee.a)(t)).call.apply(e,[this].concat(r)))).state={videoSrc:void 0,localSrc:void 0},n.peer={},n.closeModal=function(){},n}return Object(te.a)(t,e),Object(Z.a)(t,[{key:"setProps",value:function(e){var t=e.val,n=e.func;t&&n&&(this.peer=t.videochat_peer,this.closeModal=t.videochat_closeModal)}},{key:"componentDidMount",value:function(){var e=this;this.setProps(this.props),console.log("videochat didmount",this.peer),function(){var t=Object(w.a)(k.a.mark(function t(){var n,a,r=arguments;return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.length>0&&void 0!==r[0]?r[0]:new jt.a,t.next=3,Object(Ct.getLocalStream)();case 3:a=t.sent,console.log("videochat didmout",{peer:n}),new xt.a(n,a).stream=function(t){console.log("videochat",{media:t}),e.video.srcObject=t};case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()(this.peer)}},{key:"render",value:function(){var e=this;return console.log("media",this.state.videoSrc,this.state.localSrc),r.a.createElement("div",{style:{flex:"0 1 auto",margin:"auto"}},r.a.createElement("video",{ref:function(t){e.video=t},autoPlay:!0}))}}]),t}(a.Component);var Tt=function(e){function t(){var e,n;Object(Y.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object($.a)(this,(e=Object(ee.a)(t)).call.apply(e,[this].concat(r)))).state={text:"",videoModal:!1},n.toAccount=function(){var e=n.props.history;console.log("this.props",n.props),e&&e.push("/account")},n.state={messageList:[]},n.sendComment=function(){},n.peer={},n.openVideoModal=function(){n.setState({videoModal:!0});!function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:new jt.a).send("openVideo","chat_video")}(n.peer)},n}return Object(te.a)(t,e),Object(Z.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.value,a=t.func;if(n&&a){this.sendComment=a.sendComment,this.peer=n.chat_peer;!function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:new jt.a).events.data["chat.js"]=function(t){"chat_video"===t.label&&"openVideo"===t.data&&e.setState({videoModal:!0})}}(this.peer);var i=n.messages[n.nodeId];i&&(this.dataSource=i.map(function(e){console.log({messagefile:new Blob(e.file)});var t="me"===e.type?"right":"left";if(e.text)return{position:t,type:"text",text:e.text,date:new Date};var n={uri:window.URL.createObjectURL(new Blob(e.file)),blob:new Blob(e.file),status:{click:!0,loading:1},size:"".concat(new Blob(e.file).size/1e3,"kb"),width:300,height:300};return{position:t,type:"file",filename:e.filename,status:"send",text:"file",data:n,onDownload:function(){console.log("ondownload")},date:new Date}}))}return r.a.createElement("div",{style:{display:"flex",flexDirection:"column",minHeight:"95vh"}},r.a.createElement(kt.MessageList,{className:"message-list",lockable:!0,toBottomHeight:"100%",dataSource:this.dataSource,onClick:function(e){if(console.log({object:e}),"file"===e.type){var t=document.createElement("a");t.href=e.data.uri,t.download=e.filename,t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)}}}),r.a.createElement("div",{style:{width:"100%",marginTop:"auto"}},r.a.createElement(ne.o,{label:"comment",multiline:!0,margin:"normal",variant:"outlined",rows:"3",value:this.state.text,onChange:function(t){return e.setState({text:t.target.value})},style:{width:"100%"}}),r.a.createElement("br",null),r.a.createElement(ne.b,{onClick:this.openVideoModal},"video "),r.a.createElement("div",{style:{float:"right",display:"flex"}},ce({btnpicfile_label:"file"},{btnpicfile_set:function(t,n){console.log("chat pic",n),e.selectFile=t,e.selectFilename=n}}),r.a.createElement(ne.b,{onClick:function(){e.sendComment({text:e.state.text,file:e.selectFile,filename:e.selectFilename}),e.setState({text:""})}},"comment")),r.a.createElement(ne.f,{"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",open:this.state.videoModal,onClose:function(){e.setState({videoModal:!1})},style:{display:"flex"}},r.a.createElement("div",{style:{width:"90%",height:"90%",flex:"0 1 auto",margin:"auto",background:"white"}},r.a.createElement(ne.d,{onClick:function(){e.setState({videoModal:!1})},style:{float:"right"}},r.a.createElement(ae.d,null)),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{videochat_peer:{}},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{videochat_closeModal:function(){}};return console.log("setvideochat",{val:e},{func:t}),r.a.createElement(It,{val:e,func:t})}({videochat_peer:this.peer},{})))))}}]),t}(a.Component);var Ut=function(e){function t(e){var n;Object(Y.a)(this,t),(n=Object($.a)(this,Object(ee.a)(t).call(this,e))).sendComment=function(e){var t=n.props,a=t.condition,r=t.p2p,i=t.dispatch;console.log("sendcomment",{payload:e}),function(e,t){K.apply(this,arguments)}(a.dmUserId,e.text,r.kad,i,{file:e.file,filename:e.filename})};var a=n.props,r=a.p2p,i=a.history;return r.kad||i.push("/"),n}return Object(te.a)(t,e),Object(Z.a)(t,[{key:"renderId",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V;return r.a.createElement("div",null,e.dmUserId)}},{key:"render",value:function(){var e=this.props,t=e.condition,n=e.dm,a=e.p2p;return r.a.createElement("div",null,this.renderId(t),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{messages:{},nodeId:"",chat_peer:{}},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{sendComment:function(){}};return r.a.createElement(Tt,{value:e,func:t})}({messages:n.messages,nodeId:t.dmUserId,chat_peer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new C.a,t=arguments.length>1?arguments[1]:void 0;return e.f.getPeerFromnodeId(t)}(a.kad,t.dmUserId)},{sendComment:this.sendComment}))}}]),t}(a.Component),_t=Object(o.b)(function(e){return{p2p:e.p2p,twitter:e.twitter,condition:e.condition,dm:e.dm}})(Ut),St={store:Object(c.d)(Object(c.c)({p2p:y,router:f.routerReducer,twitter:F,condition:B,dm:q}),Object(c.a)(u.a,s.a,G)),history:J};Object(i.render)(r.a.createElement(o.a,{store:St.store},r.a.createElement(Q.a,null,r.a.createElement("div",null,r.a.createElement(X.a,{exact:!0,path:"/",component:st}),r.a.createElement(X.a,{path:"/main",component:Ae}),r.a.createElement(X.a,{path:"/account",component:ht}),r.a.createElement(X.a,{path:"/user",component:Ot}),r.a.createElement(X.a,{path:"/dm",component:_t})))),document.getElementById("root"))}},[[5689,2,1]]]);
//# sourceMappingURL=main.cc9ecc08.chunk.js.map