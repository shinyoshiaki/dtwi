{"version":3,"sources":["modules/p2p.js","interface/iTwitter.js","modules/twitter.js","modules/condition.js","modules/dm.js","createStore.js","components/main/header/btnAccount.js","lib/file.js","components/main/header/btnPicFile.js","components/main/header/formTweet.js","components/main/header/btnOpenTweet.js","components/main/btnReloadTimeline.js","components/main/header/formSearchUser.js","components/main/header/index.js","components/common/timelline/picture.js","components/common/timelline/tweet.js","components/common/timelline/index.js","containers/main/timeline.js","components/common/util/nodeList.js","components/main/dmList.js","components/main/index.js","components/common/nofitication/index.js","domain/route.js","pages/main.js","components/login/index.js","lib/cypher.js","pages/login.js","components/account/followList.js","components/account/index.js","pages/account.js","components/user/badge.js","components/user/index.js","pages/user.js","components/common/videoChat/index.js","components/dm/chat.js","pages/dm.js","index.js"],"names":["initialState","targetUrl","undefined","node","kad","Istate","actionType","SET_VALUE","setValue","key","value","dispatch","type","data","reducer","state","arguments","length","action","Object","objectSpread","defineProperty","iTweet","id","nickname","time","msg","opt","pic","tweet","hash","sha1","JSON","stringify","toString","myTweets","lastTweet","timeline","userTweets","followIds","PUSH_ARR","RESET_USER_TWEET","ADD_USER_TWEET","FOLLOW","findTweet","_x","_findTweet","apply","this","_callee","result","_args","regenerator_default","a","wrap","_context","prev","next","Kademlia","findValue","catch","console","log","sent","abrupt","getTimeline","stop","kvs","keyValueList","keys","forEach","push","sort","b","reverse","picture","pictureAddress","Math","random","nodeId","Date","now","store","storeChunks","pushArray","concat","includes","findUser","selectFile","dmUserId","loading","nofiticationOpen","nofiticationMessage","Icondition","setConditionValue","messages","SEND_DM","RECEIVE_DM","target","text","file","filename","send","name","history","createHistory","middleware","routerMiddleware","BtnAccount","react_default","createElement","main_Consumer","context","func","toAccount","index_es","onClick","style","marginLeft","icons_index_es","Component","getSliceArrayBuffer","blob","Promise","resolve","reject","arr","r","FileReader","blobSlice","File","prototype","slice","chunkSize","chunks","ceil","size","currentChunk","loadNext","start","end","readAsArrayBuffer","call","onerror","e","onload","BtnPicFile","_Component","_getPrototypeOf2","_this","classCallCheck","_len","args","Array","_key","possibleConstructorReturn","getPrototypeOf","label","set","handleFile","_ref","asyncToGenerator","mark","files","inherits","createClass","_this$props","props","val","btnpicfile_label","btnpicfile_set","display","onChange","htmlFor","raised","component","setBtnPicFile","btnPicFile_BtnPicFile","FormTweet","handlePicFile","_this2","closeModal","excuteTweet","margin","multiline","variant","rows","width","setState","bottom","float","BtnOpenTweet","open","handleOpen","handleClose","aria-labelledby","aria-describedby","onClose","height","flex","background","textAlign","formTweet_FormTweet","BtnReloadTimeline","reload","FormSearchUser","searchUser","placeholder","Header","tab","handleChange","event","titles","pages","flexGrow","position","backgroundColor","color","map","v","i","btnReloadTimeline_BtnReloadTimeline","formSearchUser_FormSearchUser","btnAccount_BtnAccount","btnOpenTweet_BtnOpenTweet","React","findPicture","url","p2p","_find","window","URL","createObjectURL","Blob","error","find","ImageTweet","imgsrc","imageUrl","_callee2","_context2","_this3","_callee3","_context3","_this4","Consumer","src","alt","Tweet","index","onClickId","border","borderRadius","borderWidth","borderColor","marginRight","marginBottom","picture_ImageTweet","Context","createContext","Provider","Timeline","tweet_Tweet","setTimeline","timelline_Timeline","MainTimeLine","_this$props2","twitter","follows","_this$props3","flexDirection","justifyContent","alignItems","withRouter","connect","NodeList","kbuckets","toUser","kbucket","peer","DmList","toDm","dmlist_messages","message","MainContext","main_Provider","header_Header","header","main_timeline","dmList_DmList","setDmList","nodeList_NodeList","createNodeList","Nofitication","nofiticationClose","anchorOrigin","vertical","horizontal","toMain","Main","setFile","userId","_searchUser","f","getPeerFromnodeId","findNode","getCloseEstPeer","listenAddPeer","callback","onAddPeer","_this$props4","condition","dm","main_MainContext","setMainContext","nofitication_Nofitication","setNofitication","styles","theme","layout","spacing","unit","breakpoints","up","paper","marginTop","padding","avatar","palette","secondary","main","form","submit","SignIn","handlePubkey","reader","pubKey","readAsText","handleSeckey","secKey","classes","login","register","Fragment","CssBaseline_default","className","Paper_default","Avatar_default","LockOutlined_default","Typography_default","FormControl_default","required","fullWidth","Button_default","Buffer","require","Login","targetAddress","targetPort","videoSrc","localSrc","connectNode","pubkey","seckey","Node","cypher","templink","document","href","download","body","appendChild","click","removeChild","events","payload","dmEvent","setTwitterValue","Itwitter","enc","raw","crypto","privateEncrypt","from","encrypted","publicKey","publicDecrypt","Styled","withStyles","setSignin","FollowList","AccountContext","followList_FollowList","setFollowList","Account","account_AccountContext","setAccountContext","FormBadge","user_Consumer","follow","UserContext","user_Provider","badge_FormBadge","User","tweets","getTargetTweets","user_UserContext","setUserContext","VideoChat","videochat_peer","videochat_closeModal","setProps","local","WebRTC","getLocalStream","Stream","stream","media","video","srcObject","connectStream","ref","autoPlay","FormDmChat","videoModal","messageList","sendComment","openVideoModal","closeVideoModal","chat_peer","listenPeer","messageArr","dataSource","messagefile","date","uri","status","onDownload","minHeight","react_chat_elements_dist_main","lockable","toBottomHeight","object","selectFilename","videoChat_VideoChat","setVideoChat","DM","_x2","_sendComment","renderId","chat_FormDmChat","setFormDmChat","getPeer","reduxCreateStore","combineReducers","p2pReducer","router","routerReducer","applyMiddleware","thunk","logger","render","es","HashRouter","Route","exact","path","WatchLive","getElementById"],"mappings":"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","file":"static/js/main.923b6b45.chunk.js","sourcesContent":["export const initialState = {\n  targetUrl: undefined,\n  node: undefined,\n  kad: undefined\n};\n\nexport const Istate = {\n  targetUrl: \"targetUrl\",\n  node: \"node\",\n  kad: \"kad\"\n};\n\nexport const actionType = {\n  SET_VALUE: \"SET_VALUE\"\n};\n\nexport function setValue(key, value, dispatch) {\n  dispatch({ type: actionType.SET_VALUE, data: { key, value } });\n}\n\nexport default function reducer(state = initialState, action) {\n  switch (action.type) {\n    case actionType.SET_VALUE:\n      return { ...state, [action.data.key]: action.data.value };\n\n    default:\n      return state;\n  }\n}\n","import sha1 from \"sha1\";\n\nexport function iTweet(id, nickname, time, msg, opt = { pic: undefined }) {\n  const tweet = {\n    type: \"tweet\",\n    id,\n    nickname,\n    time,\n    msg,\n    hash: undefined,\n    pic: undefined\n  };\n  tweet.hash = sha1(JSON.stringify(tweet)).toString();\n  tweet.pic = opt.pic;\n  return tweet;\n}\n","import Kademlia from \"kad-rtc\";\nimport { iTweet } from \"../interface/iTwitter\";\nimport sha1 from \"sha1\";\n\nexport const initialState = {\n  myTweets: [],\n  lastTweet: undefined,\n  timeline: [],\n  userTweets: {},\n  followIds: [],\n  nickname: \"null\"\n};\n\nexport const Istate = {\n  myTweets: \"myTweets\",\n  timeline: \"timeline\",\n  lastTweet: \"lastTweet\",\n  followIds: \"followIds\",\n  nickname: \"nickname\"\n};\n\nexport const actionType = {\n  SET_VALUE: \"TWITTER_SET_VALUE\",\n  PUSH_ARR: \"TWITTER_PUSH_ARR\",\n  RESET_USER_TWEET: \"TWITTER_RESET_USER_TWEET\",\n  ADD_USER_TWEET: \"TWITTER_ADD_USER_TWEET\",\n  FOLLOW: \"TWITTER_FOLLOW\"\n};\n\nexport function event(kad = new Kademlia(), dispatch) {\n  console.log({ kad });\n  kad.events.store[\"twitter.js\"] = value => {\n    console.log(\"twitter event\", { value });\n    if (value.type === \"tweet\") {\n      console.log(\"on tweet\");\n      getTimeline(kad, dispatch);\n    }\n  };\n}\n\nexport async function findTweet(key, kad = new Kademlia(), dispatch) {\n  dispatch({ type: actionType.RESET_USER_TWEET, data: key });\n  for (;;) {\n    const result = await kad.findValue(key).catch(console.log);\n    if (!result) break;\n    if (result.type === \"tweet\") {\n      console.log(\"find tweet\");\n      getTimeline(kad, dispatch);\n      key = result.hash;\n    } else {\n      break;\n    }\n  }\n}\n\nfunction getTimeline(kad = new Kademlia(), dispatch) {\n  const kvs = kad.keyValueList;\n  const timeline = [];\n  Object.keys(kvs).forEach(key => {\n    const value = kvs[key];\n    if (value.type === \"tweet\") {\n      timeline.push(value);\n    }\n  });\n  const sort = timeline\n    .sort((a, b) => {\n      return a.time - b.time;\n    })\n    .reverse();\n  setValue(Istate.timeline, sort, dispatch);\n}\n\nexport function tweet(\n  value,\n  kad = new Kademlia(),\n  dispatch,\n  state = initialState,\n  opt = { picture: undefined }\n) {\n  console.log(\"tweet module\", { opt });\n  const pictureAddress = sha1(Math.random().toString()).toString();\n  const tweet = opt.picture\n    ? iTweet(kad.nodeId, state.nickname, Date.now(), value, {\n        pic: pictureAddress\n      })\n    : iTweet(kad.nodeId, state.nickname, Date.now(), value);\n  if (state.lastTweet) {\n    kad.store(kad.nodeId, state.lastTweet.hash, tweet);\n  } else {\n    kad.store(kad.nodeId, kad.nodeId, tweet);\n  }\n  if (opt.picture) kad.storeChunks(kad.nodeId, pictureAddress, opt.picture);\n  setValue(Istate.lastTweet, tweet, dispatch);\n  pushArray(Istate.myTweets, tweet, dispatch);\n  getTimeline(kad, dispatch);\n}\n\nexport function follow(id, dispatch) {\n  dispatch({ type: actionType.FOLLOW, data: id });\n}\n\nexport function setValue(key, value, dispatch) {\n  dispatch({ type: actionType.SET_VALUE, data: { key, value } });\n}\n\nexport function pushArray(key, value, dispatch) {\n  dispatch({ type: actionType.PUSH_ARR, data: { key, value } });\n}\n\nexport default function reducer(state = initialState, action) {\n  switch (action.type) {\n    case actionType.SET_VALUE:\n      return { ...state, [action.data.key]: action.data.value };\n    case actionType.PUSH_ARR:\n      return {\n        ...state,\n        [action.data.key]: state[action.data.key].concat(action.data.value)\n      };\n    case actionType.RESET_USER_TWEET:\n      state.userTweets[action.data] = [];\n      return { ...state, userTweets: state.userTweets };\n    case actionType.ADD_USER_TWEET:\n      console.log(\"twitterjs reducer\", { state });\n      state.userTweets[action.data.id].push(action.data);\n      return {\n        ...state,\n        userTweets: state.userTweets\n      };\n    case actionType.FOLLOW:\n      if (!state.followIds.includes(action.data))\n        state.followIds.push(action.data);\n      return { ...state, followIds: state.followIds };\n    default:\n      return state;\n  }\n}\n","export const initialState = {\n  findUser: undefined,\n  selectFile: undefined,\n  dmUserId: undefined,\n  loading: false,\n  nofiticationOpen: false,\n  nofiticationMessage: \"\"\n};\n\nexport const Icondition = {\n  findUser: \"findUser\",\n  selectFile: \"selectFile\",\n  dmUserId: \"dmUserId\",\n  loading: \"loading\",\n  nofiticationOpen: \"nofiticationOpen\",\n  nofiticationMessage: \"nofiticationMessage\"\n};\n\nexport const actionType = {\n  SET_VALUE: \"CONDITION_SET_VALUE\"\n};\n\nexport function setConditionValue(key, value, dispatch) {\n  dispatch({ type: actionType.SET_VALUE, data: { key, value } });\n}\n\nexport default function reducer(state = initialState, action) {\n  switch (action.type) {\n    case actionType.SET_VALUE:\n      return { ...state, [action.data.key]: action.data.value };\n    default:\n      return state;\n  }\n}\n","import Kademlia from \"kad-rtc\";\nimport { setConditionValue, Icondition } from \"./condition\";\n\nexport const initialState = {\n  messages: {}\n};\n\nexport const actionType = {\n  SEND_DM: \"SEND_DM\",\n  RECEIVE_DM: \"RECEIVE_DM\"\n};\n\nexport function setValue(key, value, dispatch) {\n  dispatch({ type: actionType.SET_VALUE, data: { key, value } });\n}\n\nexport function event(kad = new Kademlia(), dispatch) {\n  kad.events.p2p[\"dm.js\"] = payload => {\n    let data;\n    if (payload.text) data = { nodeId: payload.nodeId, text: payload.text };\n    else\n      data = {\n        nodeId: payload.nodeId,\n        file: payload.file,\n        filename: payload.filename\n      };\n    dispatch({ type: actionType.RECEIVE_DM, data });\n    setConditionValue(Icondition.nofiticationOpen, true, dispatch);\n    setConditionValue(\n      Icondition.nofiticationMessage,\n      `dm comming 「${payload.text}」`,\n      dispatch\n    );\n  };\n}\n\nexport async function sendComment(\n  target,\n  text,\n  kad = new Kademlia(),\n  dispatch,\n  opt = { file: undefined, filename: undefined }\n) {\n  let result = await kad.send(target, { text }).catch(console.log);\n  if (!result) return;\n  dispatch({ type: actionType.SEND_DM, data: { nodeId: target, text: text } });\n  if (opt.file) {\n    result = await kad\n      .send(target, { file: { name: opt.filename, value: opt.file } })\n      .catch(console.log);\n    if (!result) return;\n    dispatch({\n      type: actionType.SEND_DM,\n      data: { nodeId: target, file: opt.file, filename: opt.filename }\n    });\n  }\n}\n\nexport default function reducer(state = initialState, action) {\n  switch (action.type) {\n    case actionType.SEND_DM: {\n      const data = action.data;\n\n      if (!state.messages[data.nodeId]) state.messages[data.nodeId] = [];\n      const value = state.messages[data.nodeId];\n\n      if (data.text) {\n        value.push({ type: \"me\", text: data.text });\n      } else if (data.file) {\n        value.push({ type: \"me\", file: data.file, filename: data.filename });\n      }\n      return { ...state, messages: state.messages };\n    }\n    case actionType.RECEIVE_DM: {\n      const data = action.data;\n\n      if (!state.messages[data.nodeId]) state.messages[data.nodeId] = [];\n      const value = state.messages[data.nodeId];\n\n      if (data.text) {\n        value.push({ type: \"you\", text: data.text });\n      } else if (data.file) {\n        value.push({ type: \"you\", file: data.file, filename: data.filename });\n      }\n      return { ...state, messages: state.messages };\n    }\n    default:\n      return state;\n  }\n}\n","import {\n  createStore as reduxCreateStore,\n  applyMiddleware,\n  combineReducers\n} from \"redux\";\nimport logger from \"redux-logger\";\nimport thunk from \"redux-thunk\";\nimport createHistory from \"history/createBrowserHistory\";\nimport { routerReducer, routerMiddleware } from \"react-router-redux\";\n\nimport p2pReducer from \"./modules/p2p\";\nimport twitter from \"./modules/twitter\";\nimport condition from \"./modules/condition\";\nimport dm from \"./modules/dm\";\n\nconst history = createHistory();\nconst middleware = routerMiddleware(history);\n\nexport default function createStore() {\n  const store = reduxCreateStore(\n    combineReducers({\n      p2p: p2pReducer,\n      router: routerReducer,\n      twitter,\n      condition,\n      dm\n    }),\n    applyMiddleware(thunk, logger, middleware)\n  );\n\n  return { store, history };\n}\n","import React, { Component } from \"react\";\nimport { IconButton } from \"@material-ui/core\";\nimport { AccountCircle } from \"@material-ui/icons\";\nimport { Consumer } from \"../index\";\n\nexport default class BtnAccount extends Component {\n  render() {\n    return (\n      <Consumer>\n        {context => {\n          context = context || {\n            func: {\n              toAccount: () => {}\n            }\n          };\n          return (\n            <IconButton\n              onClick={context.func.toAccount}\n              style={{ marginLeft: \"auto\" }}\n            >\n              <AccountCircle />\n            </IconButton>\n          );\n        }}\n      </Consumer>\n    );\n  }\n}\n","export function getSliceArrayBuffer(blob) {\n  console.log(\"blob blob\", blob);\n  return new Promise((resolve, reject) => {\n    let arr = [];\n    const r = new FileReader(),\n      blobSlice = File.prototype.slice,\n      chunkSize = 16384,\n      chunks = Math.ceil(blob.size / chunkSize);\n    let currentChunk = 0;\n    r.onerror = e => {\n      console.log(\"get slice blob error\", e);\n      reject();\n    };\n    r.onload = e => {\n      arr.push(e.target.result);\n      currentChunk++;\n      if (currentChunk < chunks) {\n        loadNext();\n      } else {\n        console.log(\"getfileslice\", { arr });\n        resolve(arr);\n      }\n    };\n    function loadNext() {\n      const start = currentChunk * chunkSize;\n      const end =\n        start + chunkSize >= blob.size ? blob.size : start + chunkSize;\n      r.readAsArrayBuffer(blobSlice.call(blob, start, end));\n    }\n    loadNext();\n  });\n}\n\nexport function blob2DataUrl(blob) {\n  return new Promise(resolve => {\n    const r = new FileReader();\n    r.onload = e => {\n      resolve(e.target.result);\n    };\n    console.log(\"blob2dataurl\", { blob });\n    r.readAsDataURL(blob);\n  });\n}\n","import React, { Component } from \"react\";\nimport { Button } from \"@material-ui/core\";\nimport { getSliceArrayBuffer } from \"../../../lib/file\";\n\nexport class BtnPicFile extends Component {\n  label = \"\";\n  set = () => {};\n  handleFile = async e => {\n    const blob = e.target.files[0];\n    if (!blob) return;\n    const result = await getSliceArrayBuffer(blob).catch(console.log);\n    if (!result) return;\n    console.log(\"btn pic file\", { result });\n    this.set(result, blob.name);\n  };\n\n  render() {\n    const { val, func } = this.props;\n    if (val && func) {\n      this.label = val.btnpicfile_label;\n      this.set = func.btnpicfile_set;\n    }\n    return (\n      <div>\n        <input\n          type=\"file\"\n          id=\"raised-button-file\"\n          style={{ display: \"none\" }}\n          onChange={this.handleFile}\n        />\n        <label htmlFor=\"raised-button-file\">\n          <Button raised component=\"span\">\n            {this.label}\n          </Button>\n        </label>\n      </div>\n    );\n  }\n}\n\nexport default function setBtnPicFile(\n  val = { btnpicfile_label: \"picture\" },\n  func = { btnpicfile_set: () => {} }\n) {\n  return <BtnPicFile val={val} func={func} />;\n}\n","import React, { Component } from \"react\";\nimport { TextField, Button } from \"@material-ui/core\";\nimport { Consumer } from \"../\";\nimport setBtnPicFile from \"./btnPicFile\";\n\nexport class FormTweet extends Component {\n  state = { target: \"\" };\n  file;\n\n  handlePicFile = file => {\n    this.file = file;\n  };\n\n  render() {\n    const { closeModal } = this.props;\n    return (\n      <Consumer>\n        {context => {\n          context = context || { func: { excuteTweet: () => {} }, val: {} };\n          return (\n            <div style={{ margin: 10 }}>\n              <TextField\n                label=\"tweet\"\n                multiline\n                margin=\"normal\"\n                variant=\"outlined\"\n                rows=\"6\"\n                style={{ width: \"100%\" }}\n                value={this.state.target}\n                onChange={e => {\n                  this.setState({ target: e.target.value });\n                }}\n              />\n              <br />\n              <div style={{ bottom: 0 }}>\n                <div style={{ float: \"left\" }}>\n                  {setBtnPicFile(\n                    { btnpicfile_label: \"picture\" },\n                    { btnpicfile_set: this.handlePicFile }\n                  )}\n                </div>\n                <Button\n                  style={{ float: \"right\" }}\n                  onClick={() => {\n                    context.func.excuteTweet(this.state.target, this.file);\n                    this.setState({ target: \"\" });\n                    closeModal();\n                  }}\n                >\n                  tweet\n                </Button>\n              </div>\n            </div>\n          );\n        }}\n      </Consumer>\n    );\n  }\n}\n\nexport default function setFormTweet(closeModal) {\n  return <FormTweet closeModal={closeModal} />;\n}\n","import React, { Component } from \"react\";\nimport { Button, Modal, Typography, IconButton } from \"@material-ui/core\";\nimport { Close } from \"@material-ui/icons\";\nimport setFormTweet from \"./formTweet\";\n\nexport class BtnOpenTweet extends Component {\n  state = {\n    open: false\n  };\n\n  handleOpen = () => {\n    this.setState({ open: true });\n  };\n\n  handleClose = () => {\n    this.setState({ open: false });\n  };\n\n  render() {\n    return (\n      <div>\n        <Button onClick={this.handleOpen}>tweet</Button>\n        <Modal\n          aria-labelledby=\"simple-modal-title\"\n          aria-describedby=\"simple-modal-description\"\n          open={this.state.open}\n          onClose={this.handleClose}\n          style={{ display: \"flex\" }}\n        >\n          <div\n            style={{\n              width: \"60%\",\n              height: 280,\n              flex: \"0 1 auto\",\n              margin: \"auto\",\n              background: \"white\"\n            }}\n          >\n            <div>\n              <IconButton onClick={this.handleClose} style={{ float: \"right\" }}>\n                <Close />\n              </IconButton>\n              <Typography variant=\"h5\" style={{ textAlign: \"center\" }}>\n                ツイートする\n              </Typography>\n            </div>\n            <br />\n            {setFormTweet(this.handleClose)}\n          </div>\n        </Modal>\n      </div>\n    );\n  }\n}\n\nexport default function setBtnOpenTweet() {\n  return <BtnOpenTweet />;\n}\n","import React, { Component } from \"react\";\nimport { IconButton } from \"@material-ui/core\";\nimport { Autorenew } from \"@material-ui/icons\";\nimport { Consumer } from \"./index\";\n\nexport default class BtnReloadTimeline extends Component {\n  toAccount = () => {\n    const { history } = this.props;\n    console.log(\"this.props\", this.props);\n    if (history) history.push(\"/account\");\n  };\n  render() {\n    return (\n      <Consumer>\n        {context => {\n          context = context || { func: { reload: () => {} }, val: {} };\n          return (\n            <IconButton\n              onClick={() => {\n                context.func.reload();\n              }}\n              style={{ marginLeft: \"auto\" }}\n            >\n              <Autorenew />\n            </IconButton>\n          );\n        }}\n      </Consumer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport { IconButton, InputBase } from \"@material-ui/core\";\nimport { Search } from \"@material-ui/icons\";\nimport { Consumer } from \"../index\";\n\nexport default class FormSearchUser extends Component {\n  state = { target: \"\" };\n  render() {\n    return (\n      <Consumer>\n        {context => {\n          context = context || {\n            func: {\n              searchUser: id => {\n                console.log({ id });\n              }\n            }\n          };\n          return (\n            <div>\n              <InputBase\n                placeholder=\"Search…\"\n                value={this.state.target}\n                onChange={e => {\n                  this.setState({ target: e.target.value });\n                }}\n              />\n              <IconButton\n                onClick={() => {\n                  context.func.searchUser(this.state.target);\n                  this.setState({ target: \"\" });\n                }}\n              >\n                <Search />\n              </IconButton>\n            </div>\n          );\n        }}\n      </Consumer>\n    );\n  }\n}\n","import React from \"react\";\nimport { AppBar, Tabs, Tab, Toolbar } from \"@material-ui/core\";\nimport BtnAccount from \"./btnAccount\";\nimport setBtnOpenTweet from \"./btnOpenTweet\";\nimport BtnReloadTimeline from \"../btnReloadTimeline\";\nimport setFormSearchUser from \"./formSearchUser\";\nimport FormSearchUser from \"./formSearchUser\";\n\nclass Header extends React.Component {\n  state = {\n    tab: 0\n  };\n\n  handleChange = (event, tab) => {\n    this.setState({ tab });\n  };\n\n  titles = [];\n  nodeId = \"\";\n  pages = [];\n\n  render() {\n    const { value, func } = this.props;\n    if (value && func) {\n      this.titles = value.titles;\n      this.pages = value.pages;\n      this.nodeId = value.nodeId;\n    }\n    const { tab } = this.state;\n\n    return (\n      <div style={{ flexGrow: 1 }}>\n        <AppBar position=\"static\" style={{ backgroundColor: \"white\" }}>\n          <Toolbar>\n            <Tabs\n              value={tab}\n              onChange={this.handleChange}\n              style={{ color: \"black\" }}\n            >\n              {this.titles\n                ? this.titles.map((v, i) => {\n                    return <Tab label={v} key={i} />;\n                  })\n                : undefined}\n            </Tabs>\n            <BtnReloadTimeline />\n            <FormSearchUser />\n            <BtnAccount />\n            {setBtnOpenTweet()}\n          </Toolbar>\n        </AppBar>\n        {this.pages\n          ? this.pages.map((v, i) => {\n              return tab === i && v;\n            })\n          : undefined}\n      </div>\n    );\n  }\n}\n\nexport function header(\n  value = { titles: [], pages: [], nodeId: \"\" },\n  func = {}\n) {\n  return <Header value={value} func={func} />;\n}\n","import React, { Component } from \"react\";\nimport { Consumer } from \".\";\nimport Kademlia from \"kad-rtc\";\n\nconst findPicture = (url, p2p) => {\n  if (!p2p || !p2p.kad) return;\n  console.log(\"findpicture\", { url });\n  return new Promise((resolve, reject) => {\n    find(p2p.kad);\n    async function find(kad = new Kademlia()) {\n      if (Object.keys(kad.keyValueList).includes(url)) {\n        console.log(\"fownd picture\", kad.keyValueList[url]);\n        try {\n          resolve(\n            window.URL.createObjectURL(new Blob(kad.keyValueList[url].chunks))\n          );\n        } catch (error) {\n          reject(\"findpicture blob error\", { error });\n        }\n      } else {\n        console.log(\"findpicture findvalue\");\n        const result = await kad.findValue(url).catch(console.log);\n        if (!result) reject(\"file not fownd\");\n        try {\n          console.log(\"findpicture findvalue\", { result });\n\n          resolve(window.URL.createObjectURL(new Blob(result.chunks)));\n        } catch (error) {\n          reject(\"findpicture blob error\", { error }, { result });\n        }\n      }\n    }\n  });\n};\n\nexport class ImageTweet extends Component {\n  p2p;\n  imageUrl;\n  constructor(props) {\n    super(props);\n    this.state = {\n      imgsrc: undefined\n    };\n    const { imageUrl } = this.props;\n    this.imageUrl = imageUrl;\n  }\n\n  componentDidMount() {\n    const { imageUrl } = this.props;\n    console.log(\"picture didmount\", { imageUrl });\n    (async () => {\n      if (imageUrl) {\n        const result = await findPicture(imageUrl, this.p2p).catch(console.log);\n        if (result) {\n          this.setState({ imgsrc: result });\n        }\n      }\n    })();\n  }\n\n  componentDidUpdate() {\n    //imageUrlがよくわからない動きをするのでライフサイクルを追加\n    const { imageUrl } = this.props;\n    console.log(\"picture didupdate\", { imageUrl });\n    (async () => {\n      if (imageUrl !== this.imageUrl) {\n        this.imageUrl = imageUrl;\n        console.log(\"componentDidUpdate find\");\n        const result = await findPicture(imageUrl, this.p2p).catch(console.log);\n        if (result) {\n          this.setState({ imgsrc: result });\n        }\n      }\n    })();\n  }\n\n  render() {\n    const { imageUrl } = this.props;\n    return (\n      <Consumer>\n        {context => {\n          context = context || { func: {}, val: { p2p: {} } };\n          this.p2p = context.val.p2p;\n          return (\n            <div>\n              {imageUrl}\n              <img src={this.state.imgsrc} alt={imageUrl} width=\"70%\" />\n            </div>\n          );\n        }}\n      </Consumer>\n    );\n  }\n}\n\nexport default function setImageTweet(imageUrl) {\n  console.log(\"setpicture\", { imageUrl });\n  return <ImageTweet imageUrl={imageUrl} key={imageUrl} />;\n}\n","import React, { Component } from \"react\";\nimport { IconButton, Button } from \"@material-ui/core\";\nimport { AccountCircle } from \"@material-ui/icons\";\nimport setImageTweet from \"./picture\";\nimport { Consumer } from \".\";\n\nexport class Tweet extends Component {\n  render() {\n    const { tweet, index } = this.props;\n    return (\n      <Consumer>\n        {context => {\n          context = context || { func: { onClickId: () => {} }, val: {} };\n\n          return (\n            <div\n              style={{\n                border: \"1px solid\",\n                borderRadius: 4,\n                borderWidth: 0.5,\n                borderColor: \"#d6d7da\",\n                margin: 3\n              }}\n              key={index}\n            >\n              <IconButton onClick={this.toAccount}>\n                <AccountCircle />\n              </IconButton>\n              {tweet.nickname}\n              <Button\n                onClick={() => {\n                  context.func.onClickId(tweet.id);\n                }}\n              >\n                {tweet.id}\n              </Button>\n              <br />\n              <div\n                style={{ float: \"right\", marginRight: 20, marginBottom: 20 }}\n              >\n                {new Date(tweet.time).toString()}\n              </div>\n              <br />\n              <div style={{ marginLeft: 50 }}>\n                {tweet.msg}\n                <br />\n                {tweet.pic ? setImageTweet(tweet.pic) : undefined}\n              </div>\n              <br />\n            </div>\n          );\n        }}\n      </Consumer>\n    );\n  }\n}\n\nexport default function setTweet(tweet, index) {\n  return <Tweet tweet={tweet} index={index} />;\n}\n","import React, { Component, createContext } from \"react\";\nimport setTweet from \"./tweet\";\n\nconst Context = createContext();\nexport const { Provider, Consumer } = Context;\n\nexport class Timeline extends Component {\n  render() {\n    const { timeline, func, p2p } = this.props;\n    console.log(\"timeline render\", { timeline });\n    return (\n      <Provider value={{ func, val: { p2p } }}>\n        <div>\n          {timeline.map((v, i) => {\n            return setTweet(v, i);\n          })}\n        </div>\n      </Provider>\n    );\n  }\n}\n\nexport function setTimeline(\n  timeline = [],\n  p2p,\n  func = {\n    onClickId: () => {}\n  }\n) {\n  console.log(\"settimeline\", { timeline });\n  return <Timeline timeline={timeline} p2p={p2p} func={func} />;\n}\n","import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { setTimeline } from \"../../components/common/timelline\";\nimport { setConditionValue, Icondition } from \"../../modules/condition\";\nimport { withRouter } from \"react-router\";\nimport { initialState, findTweet } from \"../../modules/twitter\";\n\nclass MainTimeLine extends Component {\n  onClickId = id => {\n    const { dispatch, history, p2p } = this.props;\n    if (id !== p2p.kad.nodeId) {\n      setConditionValue(Icondition.findUser, id, dispatch);\n      history.push(\"/user\");\n    } else {\n      history.push(\"/account\");\n    }\n  };\n\n  componentDidMount() {\n    const { twitter, p2p, dispatch } = this.props;\n    follows(twitter, p2p);\n    function follows(twitter = initialState, p2p) {\n      twitter.followIds.forEach(async id => {\n        await findTweet(id, p2p.kad, dispatch);\n      });\n    }\n  }\n\n  render() {\n    const { twitter, p2p } = this.props;\n    console.log(\"timeline container render\", { twitter });\n    return (\n      <div\n        style={{\n          display: \"flex\",\n          flexDirection: \"column\",\n          justifyContent: \"center\",\n          alignItems: \"center\"\n        }}\n      >\n        {() => {\n          console.log(\"timeline test\", twitter.timeline);\n        }}\n\n        <div style={{ width: \"50%\" }}>\n          {setTimeline(twitter.timeline, p2p, {\n            onClickId: this.onClickId\n          })}\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    twitter: state.twitter,\n    p2p: state.p2p\n  };\n};\n\nexport default withRouter(connect(mapStateToProps)(MainTimeLine));\n","import React, { Component } from \"react\";\nimport {\n  Table,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableBody,\n  Button\n} from \"@material-ui/core\";\n\nexport default class NodeList extends Component {\n  kbuckets = [];\n  toUser = id => {};\n\n  render() {\n    const { val, func } = this.props;\n    if (val && func) {\n      this.kbuckets = val.kbuckets;\n      this.toUser = func.toUser;\n    }\n    console.log(\"nodelist\", this.kbuckets);\n    return (\n      <div style={{ margin: \"20px\" }}>\n        <Table>\n          <TableHead>\n            <TableRow>\n              <TableCell>index</TableCell>\n              <TableCell>nodes</TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {this.kbuckets.map((kbucket, i) => {\n              return kbucket.length > 0 ? (\n                <TableRow key={i}>\n                  <TableCell>{i}</TableCell>\n                  <TableCell>\n                    {kbucket.map((peer, i) => {\n                      return (\n                        <Button\n                          key={i}\n                          onClick={() => {\n                            this.toUser(peer.nodeId);\n                          }}\n                        >\n                          {peer.nodeId}\n                        </Button>\n                      );\n                    })}\n                  </TableCell>\n                </TableRow>\n              ) : (\n                undefined\n              );\n            })}\n          </TableBody>\n        </Table>\n      </div>\n    );\n  }\n}\n\nexport function createNodeList(\n  val = { kbuckets: [] },\n  func = { toUser: id => {} }\n) {\n  return <NodeList val={val} func={func} />;\n}\n","import React, { Component } from \"react\";\nimport { Button } from \"@material-ui/core\";\n\nexport class DmList extends Component {\n  messages = {};\n  toDm = id => {};\n\n  render() {\n    const { val, func } = this.props;\n    if (val && func) {\n      this.messages = val.dmlist_messages;\n      this.toDm = func.toDm;\n    }\n\n    return (\n      <div\n        style={{\n          display: \"flex\",\n          flexDirection: \"column\",\n          justifyContent: \"center\",\n          alignItems: \"center\"\n        }}\n      >\n        <div\n          style={{\n            width: \"50%\",\n            border: \"1px solid\",\n            borderRadius: 4,\n            borderWidth: 0.5,\n            borderColor: \"#d6d7da\"\n          }}\n        >\n          <div style={{ margin: \"1.5%\" }}>\n            <div>dm list</div>\n            {Object.keys(this.messages).map((key, i) => {\n              const message = this.messages[key];\n              console.log({ message });\n              return (\n                <div key={i}>\n                  <Button\n                    onClick={() => {\n                      this.toDm(key);\n                    }}\n                  >\n                    {key}\n                  </Button>\n                  <br />\n                  {message[message.length - 1].text}\n                </div>\n              );\n            })}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport function setDmList(\n  val = { dmlist_messages: { key: [{ text: \"sample\" }] } },\n  func = {\n    toDm: id => {}\n  }\n) {\n  console.log(\"setdmlist\", { val }, { func });\n  return <DmList val={val} func={func} />;\n}\n","import React, { Component, createContext } from \"react\";\nimport { header } from \"./header\";\nimport MainTimeLine from \"../../containers/main/timeline\";\nimport { createNodeList } from \"../common/util/nodeList\";\nimport { setDmList } from \"./dmList\";\n\nconst Context = createContext();\nexport const { Provider, Consumer } = Context;\n\nexport class MainContext extends Component {\n  render() {\n    const { val, func } = this.props;\n\n    console.log(\"main index\", this.props);\n    return (\n      <Provider value={{ val, func }}>\n        {header(\n          {\n            titles: [\"timeline\", \"dm\", \"kademlia\"],\n            pages: [\n              <MainTimeLine />,\n              setDmList(val, func),\n              createNodeList({ kbuckets: val.kbuckets }, func)\n            ],\n            nodeId: val.nodeId\n          },\n          {}\n        )}\n      </Provider>\n    );\n  }\n}\n\nexport default function setMainContext(\n  val = { kbuckets: [], nodeId: \"\", dmlist_messages: {} },\n  func = {\n    excuteTweet: () => {},\n    reload: () => {},\n    setFile: () => {},\n    searchUser: () => {},\n    toAccount: () => {},\n    toDm: id => {},\n    toUser: id => {}\n  }\n) {\n  return <MainContext val={val} func={func} />;\n}\n","import React, { Component } from \"react\";\nimport { Snackbar } from \"@material-ui/core\";\n\nexport class Nofitication extends Component {\n  nofiticationOpen = false;\n  nofiticationMessage = \"\";\n  nofiticationClose = () => {};\n\n  render() {\n    const { val, func } = this.props;\n    if (val && func) {\n      this.nofiticationOpen = val.nofiticationOpen;\n      this.nofiticationMessage = val.nofiticationMessage;\n      this.nofiticationClose = func.nofiticationClose;\n    }\n    return (\n      <div>\n        <Snackbar\n          anchorOrigin={{ vertical: \"top\", horizontal: \"center\" }}\n          open={this.nofiticationOpen}\n          onClose={this.nofiticationClose}\n          message={this.nofiticationMessage}\n        />\n      </div>\n    );\n  }\n}\n\nexport default function setNofitication(\n  val = { nofiticationOpen: false, nofiticationMessage: \"\" },\n  func = { nofiticationClose: () => {} }\n) {\n  return <Nofitication val={val} func={func} />;\n}\n","import { setConditionValue, Icondition } from \"../modules/condition\";\n\nexport const toDm = (props, id) => {\n  const { history, dispatch } = props;\n  setConditionValue(Icondition.dmUserId, id, dispatch);\n  if (history) history.push(\"/dm\");\n};\n\nexport const toUser = (props, id) => {\n  const { history, dispatch } = props;\n  setConditionValue(Icondition.findUser, id, dispatch);\n  if (history) history.push(\"/user\");\n};\n\nexport const toMain = props => {\n  const { history } = props;\n  if (history) history.push(\"/main\");\n};\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { tweet } from \"../modules/twitter\";\nimport setMainContext from \"../components/main\";\nimport { setConditionValue, Icondition } from \"../modules/condition\";\nimport Kademlia from \"kad-rtc\";\nimport { Modal, CircularProgress } from \"@material-ui/core\";\nimport setNofitication from \"../components/common/nofitication\";\nimport { toDm, toUser } from \"../domain/route\";\n\nclass Main extends React.Component {\n  nodeId = \"\";\n  constructor(props) {\n    super(props);\n    const { p2p, history } = this.props;\n    this.state = {\n      value: 0,\n      kbuckets: p2p.kad ? p2p.kad.kbuckets : []\n    };\n\n    if (!p2p.kad) {\n      history.push(\"/\");\n    }\n  }\n\n  componentWillMount() {\n    const { p2p } = this.props;\n    if (p2p.kad) this.nodeId = p2p.kad.nodeId;\n  }\n\n  componentDidMount() {\n    const { p2p } = this.props;\n    this.listenAddPeer(p2p.kad);\n  }\n\n  listenAddPeer(kad) {\n    if (!kad) return;\n    console.log(\"addlister\");\n    kad.callback.onAddPeer = data => {\n      console.log(\"onaddpeer\", { data });\n      this.setState({ kbuckets: kad.kbuckets });\n    };\n  }\n\n  excuteTweet = (text, file) => {\n    const { dispatch, p2p, twitter } = this.props;\n    tweet(text, p2p.kad, dispatch, twitter, { picture: file });\n  };\n\n  setFile = chunks => {\n    const { dispatch } = this.props;\n    setConditionValue(Icondition.selectFile, chunks, dispatch);\n  };\n\n  searchUser = userId => {\n    const { dispatch, p2p, history } = this.props;\n    searchUser(p2p.kad);\n    async function searchUser(kad = new Kademlia()) {\n      setConditionValue(Icondition.loading, true, dispatch);\n      console.log(\"searchUser\", { userId });\n      const peer = kad.f.getPeerFromnodeId(userId);\n      if (peer) {\n        setConditionValue(Icondition.loading, false, dispatch);\n        setConditionValue(Icondition.findUser, userId, dispatch);\n        history.push(\"/user\");\n      } else {\n        const result = await kad\n          .findNode(userId, kad.f.getCloseEstPeer(userId))\n          .catch(console.log);\n        setConditionValue(Icondition.loading, false, dispatch);\n        if (result) {\n          setConditionValue(Icondition.findUser, userId, dispatch);\n          history.push(\"/user\");\n        }\n      }\n    }\n  };\n\n  toAccount = () => {\n    const { history } = this.props;\n    console.log(\"this.props\", this.props);\n    if (history) history.push(\"/account\");\n  };\n\n  nofiticationClose = () => {\n    const { dispatch } = this.props;\n    setConditionValue(Icondition.nofiticationOpen, false, dispatch);\n  };\n\n  toDm = id => {\n    toDm(this.props, id);\n  };\n\n  toUser = id => {\n    toUser(this.props, id);\n  };\n\n  render() {\n    const { p2p, condition, dm } = this.props;\n    console.log(\"main\", { p2p });\n    return (\n      <div>\n        {setMainContext(\n          {\n            kbuckets: this.state.kbuckets,\n            nodeId: this.nodeId,\n            dmlist_messages: dm.messages\n          },\n          {\n            excuteTweet: this.excuteTweet,\n            reload: {},\n            setFile: this.setFile,\n            searchUser: this.searchUser,\n            toAccount: this.toAccount,\n            toDm: this.toDm,\n            toUser: this.toUser\n          }\n        )}\n        <Modal\n          open={condition.loading}\n          style={{\n            display: \"flex\",\n            justifyContent: \"center\",\n            alignItems: \"center\"\n          }}\n        >\n          <CircularProgress />\n        </Modal>\n        {setNofitication(\n          {\n            nofiticationOpen: condition.nofiticationOpen,\n            nofiticationMessage: condition.nofiticationMessage\n          },\n          { nofiticationClose: this.nofiticationClose }\n        )}\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    p2p: state.p2p,\n    twitter: state.twitter,\n    condition: state.condition,\n    dm: state.dm\n  };\n};\n\nexport default connect(mapStateToProps)(Main);\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport Button from \"@material-ui/core/Button\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\nimport Checkbox from \"@material-ui/core/Checkbox\";\nimport Input from \"@material-ui/core/Input\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport LockIcon from \"@material-ui/icons/LockOutlined\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Typography from \"@material-ui/core/Typography\";\nimport withStyles from \"@material-ui/core/styles/withStyles\";\nimport { TextField } from \"@material-ui/core\";\n\nconst styles = theme => ({\n  layout: {\n    width: \"auto\",\n    display: \"block\", // Fix IE 11 issue.\n    marginLeft: theme.spacing.unit * 3,\n    marginRight: theme.spacing.unit * 3,\n    [theme.breakpoints.up(400 + theme.spacing.unit * 3 * 2)]: {\n      width: 400,\n      marginLeft: \"auto\",\n      marginRight: \"auto\"\n    }\n  },\n  paper: {\n    marginTop: theme.spacing.unit * 8,\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n    padding: `${theme.spacing.unit * 2}px ${theme.spacing.unit * 3}px ${theme\n      .spacing.unit * 3}px`\n  },\n  avatar: {\n    margin: theme.spacing.unit,\n    backgroundColor: theme.palette.secondary.main\n  },\n  form: {\n    width: \"100%\", // Fix IE 11 issue.\n    marginTop: theme.spacing.unit\n  },\n  submit: {\n    marginTop: theme.spacing.unit * 3\n  }\n});\n\nclass SignIn extends Component {\n  pubKey;\n  secKey;\n  nickname = \"null\";\n\n  handlePubkey = async e => {\n    const blob = e.target.files[0];\n    if (!blob) return;\n    const reader = new FileReader();\n    reader.onload = () => {\n      this.pubKey = reader.result;\n    };\n    reader.readAsText(blob);\n  };\n\n  handleSeckey = async e => {\n    const blob = e.target.files[0];\n    if (!blob) return;\n    const reader = new FileReader();\n    reader.onload = () => {\n      this.secKey = reader.result;\n    };\n    reader.readAsText(blob);\n  };\n\n  render() {\n    const { classes, login, register } = this.props;\n    return (\n      <React.Fragment>\n        <CssBaseline />\n        <main className={classes.layout}>\n          <Paper className={classes.paper}>\n            <Avatar className={classes.avatar}>\n              <LockIcon />\n            </Avatar>\n            <Typography component=\"h1\" variant=\"h5\">\n              Dtwi\n            </Typography>\n\n            <form className={classes.form}>\n              <div\n                style={{\n                  border: \"1px solid\",\n                  borderRadius: 4,\n                  borderWidth: 0.5,\n                  borderColor: \"#d6d7da\"\n                }}\n              >\n                <FormControl margin=\"normal\" required fullWidth>\n                  <div style={{ textAlign: \"center\" }}>\n                    <input\n                      type=\"file\"\n                      id=\"pubkey\"\n                      style={{ display: \"none\" }}\n                      onChange={this.handlePubkey}\n                    />\n                    <label htmlFor=\"pubkey\">\n                      <Button raised component=\"span\">\n                        pubKey\n                      </Button>\n                    </label>\n                  </div>\n                </FormControl>\n                <FormControl margin=\"normal\" required fullWidth>\n                  <div style={{ textAlign: \"center\" }}>\n                    <input\n                      type=\"file\"\n                      id=\"seckey\"\n                      style={{ display: \"none\" }}\n                      onChange={this.handleSeckey}\n                    />\n                    <label htmlFor=\"seckey\">\n                      <Button raised component=\"span\">\n                        secKey\n                      </Button>\n                    </label>\n                  </div>\n                </FormControl>\n                <Button\n                  fullWidth\n                  variant=\"contained\"\n                  color=\"primary\"\n                  className={classes.submit}\n                  onClick={() => {\n                    console.log(\"login\", this.pubKey, this.secKey);\n                    login(this.pubKey, this.secKey);\n                  }}\n                >\n                  Sign in\n                </Button>\n              </div>\n              <br />\n              <br />\n              <div\n                style={{\n                  textAlign: \"center\",\n                  border: \"1px solid\",\n                  borderRadius: 4,\n                  borderWidth: 0.5,\n                  borderColor: \"#d6d7da\"\n                }}\n              >\n                <TextField\n                  label=\"nick name\"\n                  onChange={e => {\n                    this.nickname = e.target.value;\n                  }}\n                />\n                <br />\n                <br />\n                <Button\n                  fullWidth\n                  variant=\"contained\"\n                  onClick={() => {\n                    register(this.nickname);\n                  }}\n                >\n                  register\n                </Button>\n              </div>\n            </form>\n          </Paper>\n        </main>\n      </React.Fragment>\n    );\n  }\n}\n\nSignIn.propTypes = {\n  classes: PropTypes.object.isRequired\n};\n\nexport default function setSignin(login = () => {}, register = name => {}) {\n  const Styled = withStyles(styles)(SignIn);\n  return <Styled login={login} register={register} />;\n}\n","import crypto from \"crypto\";\nconst Buffer = require(\"buffer/\").Buffer;\n\nexport function encrypt(raw,secKey) {\n  const encrypted = crypto.privateEncrypt(secKey, new Buffer.from(raw));\n  return encrypted.toString(\"base64\");\n}\n\nexport function decrypt(encrypted, publicKey) {\n  const decrypted = crypto.publicDecrypt(\n    publicKey,\n    new Buffer.from(encrypted, \"base64\")\n  );\n  return decrypted.toString(\"utf8\");\n}\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { setValue, Istate } from \"../modules/p2p\";\nimport Node from \"kad-rtc/lib/node/node\";\nimport {\n  event,\n  tweet,\n  setValue as setTwitterValue,\n  Istate as Itwitter\n} from \"../modules/twitter\";\nimport { event as dmEvent } from \"../modules/dm\";\nimport setSignin from \"../components/login\";\nimport { getStream } from \"../lib/video\";\nimport { encrypt, decrypt } from \"../lib/cypher\";\nimport { setConditionValue, Icondition } from \"../modules/condition\";\n\nclass Login extends React.Component {\n  targetAddress = \"35.196.94.146\";\n  targetPort = 20000;\n  state = { videoSrc: undefined, localSrc: undefined };\n\n  connectNode = (pubkey, seckey) => {\n    const { dispatch } = this.props;\n    const targetUrl = `http://${this.targetAddress}:${this.targetPort}`;\n    console.log(this.targetAddress, { targetUrl });\n\n    setValue(Istate.targetUrl, targetUrl, dispatch);\n    const node = new Node(this.targetAddress, this.targetPort, {\n      pubkey,\n      seckey\n    });\n    setValue(Istate.node, node, dispatch);\n    setValue(Istate.kad, node.kad, dispatch);\n\n    console.log(node.kad.cypher.pubKey);\n    let templink = document.createElement(\"a\");\n    templink.href = window.URL.createObjectURL(\n      new Blob([node.kad.cypher.pubKey], {\n        type: \"text/plain\"\n      })\n    );\n    templink.download = \"pubkey.txt\";\n    templink.style.display = \"none\";\n    document.body.appendChild(templink);\n    templink.click();\n    document.body.removeChild(templink);\n\n    templink = document.createElement(\"a\");\n    templink.href = window.URL.createObjectURL(\n      new Blob([node.kad.cypher.secKey], {\n        type: \"text/plain\"\n      })\n    );\n    templink.download = \"seckey.txt\";\n    templink.style.display = \"none\";\n    document.body.appendChild(templink);\n    templink.click();\n    document.body.removeChild(templink);\n\n    event(node.kad, dispatch);\n    dmEvent(node.kad, dispatch);\n\n    return node;\n  };\n\n  toMain = () => {\n    this.props.history.push(\"/main\");\n  };\n\n  register = nickname => {\n    const { dispatch } = this.props;\n    setTwitterValue(Itwitter.nickname, nickname, dispatch);\n    this.connectNode();\n    this.toMain();\n  };\n\n  login = (pubkey, seckey) => {\n    try {\n      const word = \"test\";\n      const enc = encrypt(word, seckey);\n      const dec = decrypt(enc, pubkey);\n      if (word === dec) {\n        this.connectNode(pubkey, seckey);\n      } else {\n        console.log(\"error\");\n      }\n      this.toMain();\n    } catch (error) {\n      console.log({ error });\n    }\n  };\n\n  render() {\n    return <div>{setSignin(this.login, this.register)}</div>;\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    twitter: state.twitter\n  };\n};\n\nexport default connect(mapStateToProps)(Login);\n","import React, { Component } from \"react\";\nimport { Button } from \"@material-ui/core\";\n\nexport class FollowList extends Component {\n  follows = [];\n  onClickId = id => {\n    console.log({ id });\n  };\n\n  render() {\n    const { value, func } = this.props;\n    if (value && func) {\n      this.follows = value.follows;\n      this.onClickId = func.onClickId;\n    }\n\n    return (\n      <div\n        style={{          \n          textAlign: \"center\",\n          border: \"1px solid\",\n          borderRadius: 4,\n          borderWidth: 0.5,\n          borderColor: \"#d6d7da\"\n        }}\n      >\n        <div>follow list</div>\n        {this.follows.map((v, i) => {\n          return (\n            <div>\n              <Button\n                onClick={() => {\n                  this.onClickId(v);\n                }}\n                key={i}\n                style={{ width: \"90%\" }}\n              >\n                {v}\n              </Button>\n              <br />\n            </div>\n          );\n        })}\n      </div>\n    );\n  }\n}\n\nexport function setFollowList(\n  value = { follows: [] },\n  func = {\n    onClickId: id => {\n      console.log({ id });\n    }\n  }\n) {\n  return <FollowList value={value} func={func} />;\n}\n","import React, { Component, createContext } from \"react\";\nimport { IconButton } from \"@material-ui/core\";\nimport { ArrowBack } from \"@material-ui/icons\";\nimport { Istate } from \"../../modules/twitter\";\nimport { setTimeline } from \"../../components/common/timelline\";\nimport { setFollowList } from \"./followList\";\n\nconst Context = createContext();\nexport const { Provider, Consumer } = Context;\n\nexport class AccountContext extends Component {\n  twitter = [];\n  toMain = () => {};\n  p2p = { kad: { nodeId: \"null\", cypher: { secKey: \"null\", pubKey: \"null\" } } };\n\n  render() {\n    const { value, func } = this.props;\n    if (value && func) {\n      this.twitter = value.twitter;\n      this.toMain = func.toMain;\n      this.p2p = value.p2p;\n    }\n    console.log(\"account context\", this.p2p);\n    return (\n      <div>\n        <IconButton onClick={this.toMain} style={{ marginLeft: \"auto\" }}>\n          <ArrowBack />\n        </IconButton>\n        <div style={{ display: \"flex\" }}>\n          <div style={{ width: \"50%\" }}>\n            <div\n              style={{\n                border: \"1px solid\",\n                borderRadius: 4,\n                borderWidth: 0.5,\n                borderColor: \"#d6d7da\"\n              }}\n            >\n              nodeId\n              <br />\n              {this.p2p.kad.nodeId}\n              <br />\n            </div>\n            {setFollowList(value, func)}\n          </div>\n          <div\n            style={{\n              flex: 1,\n              border: \"1px solid\",\n              borderRadius: 4,\n              borderWidth: 0.5,\n              borderColor: \"#d6d7da\"\n            }}\n          >\n            <div>my post</div>\n            {setTimeline(this.twitter[Istate.myTweets], value.p2p)}\n          </div>\n        </div>{\" \"}\n      </div>\n    );\n  }\n}\n\nexport default function setAccountContext(\n  value = {\n    twitter: [],\n    follows: [],\n    p2p: {\n      kad: {\n        nodeId: \"null\",\n        cypher: {\n          secKey:\n            \"-----BEGIN RSA PRIVATE KEY----- MIIEowIBAAKCAQEAsS+dizngIjgt5wKPD4IAXKd/FgcCR1ygx15WcuYw1krRC/va1+exphbA WUUthHTraT1Qt1ptKEaEHGAzYQgmVvM2JmNTIF53ndAtIuDPHIRTD4bnPPi75ynxynqTEtw5 +42cgkVRuPZ28spqxDG6G8zjQwYyNS58ODmCKnXT3BMu7SDv4gJYsPPR0hXc6c2ABy+vVvYM DbIOJ06e2Z3+I1I6wDlOLjRW2DoaEQ4phwxYbWCaWjIajUhoE+nHCGeM8ybyWWNGqJ7sTai+ XRUcyWdRvHPSuIpXUlB/aWI6WYC1OczDT4L2NZS1NmuuxBOcZn9JbGnZQXdom8bjaNz1wQID AQABAoIBAEgINoEKV08yDZ8zkBta23DPez/mO4vtYUOL25M8d7A2nEPF8NMDU1pVN39TO0z1 B1syXSUdMvFDsaOjjF+vI38HwwTaLkojfXd/0UmzoR9TwDy4uDs2V5WDnNOW/0GUnFHi4TSo n6+VKwhLOBpoqONyaRWvaCvsqP1mi79dRXLbACwiwwAGP5DuhQIMZOtuQDfa3d/shdhvbGhe zn5bo5rjPeijtc+OZfxt1BHCuSL6fIc2NYU61tv77uK9IpPcpfQHWkArncRxPVlsn8jRgg7E tJtbw8FETxchdIbeduuVehAb2wVd2DMa40TQbXsfyVaAqBfc4J6mrX9v1/89es0CgYEA4bOR rwNBC4gU9TnX84AqoFmBAut/97MEWAcvuwV3U23mCAZlbpHq12vBusfGLgcBhKbx1tpq+DKf 7ZU5n+bmWicY2gde2RdjLKJjVxKDupj09rEXXTYEPY5pu0aCqp779QulMGL15LrJSYw7aAWg Ms6GxnFmR7MXrL0w3Q6zNH8CgYEAyPjFGSj/bx/CxswOiE0KI9SpzfmJ6enrfuq243i79uiq mQ7PIdR04AKiUXkfwKQlKMtV5j1GFz+VUgH4HiCyBWjVn3z1hpjS9cmYi0fToD0Ltrf+d6IO 85OkZMwbvd5HFilQCzYHXDSmyg1e51heBPrfEngi74+XZQbI6sF1tb8CgYBeo0T69YpYo37m NJLwb1VwVxdZehX2bwHrR1gkO26FdRd3VfdCHb0zBuP8xbe7pQRl8vqE9KDV4aRdoqy+97qv IqWxBlYnAT98f7rXz9OccnaE2kzJsNSmWwjKlg5ELNXJMlDZsSUZ+5hbVomyXGmH5EFvBC22 8smCjPHoPzm1UQKBgQCoWAI6BiaZfgBZJ/sQX4Ab7Xrjp6DHyQNUB+Z0+uBwfgrRNR96lg3k yzAOkShw5M6fslvdBfydYsyAqledXQPiFiPDehfszD0CWAEowlzZ/+i9ALjum1hs3oK5UGP4 kqX3QVnkWjimGxCPdc3GejYfc8nCHdId26kUni9UvgMM3wKBgEmCvlBXcYycUmyt9OQSYaJh LNS65YrHnG5JXqO0tdJcnBJFiqAzOH/VYiKep6vmbP2RpBbMYA0vb/+3Y17QajfGAD7IlzZr zRUsJ8CjaX/5/VeCtjKC5igQdMOkkxJnwOZvKma32EIoA3VPo8p4XqLZsQTtxT+XWeAXElzW nrUc -----END RSA PRIVATE KEY----- \",\n          pubKey:\n            \"-----BEGIN RSA PUBLIC KEY----- MIIBCgKCAQEAsS+dizngIjgt5wKPD4IAXKd/FgcCR1ygx15WcuYw1krRC/va1+exphbAWUUt hHTraT1Qt1ptKEaEHGAzYQgmVvM2JmNTIF53ndAtIuDPHIRTD4bnPPi75ynxynqTEtw5+42c gkVRuPZ28spqxDG6G8zjQwYyNS58ODmCKnXT3BMu7SDv4gJYsPPR0hXc6c2ABy+vVvYMDbIO J06e2Z3+I1I6wDlOLjRW2DoaEQ4phwxYbWCaWjIajUhoE+nHCGeM8ybyWWNGqJ7sTai+XRUc yWdRvHPSuIpXUlB/aWI6WYC1OczDT4L2NZS1NmuuxBOcZn9JbGnZQXdom8bjaNz1wQIDAQAB -----END RSA PUBLIC KEY-----\"\n        }\n      }\n    }\n  },\n  func = { toMain: () => {}, onClickId: () => {} }\n) {\n  return <AccountContext value={value} func={func} />;\n}\n","import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport setAccountContext from \"../components/account\";\nimport { Istate } from \"../modules/twitter\";\nimport { Icondition ,setConditionValue} from \"../modules/condition\";\n\n\nclass Account extends Component {\n  constructor(props) {\n    super(props);\n    const { p2p, history } = this.props;\n    if (!p2p.kad) {\n      history.push(\"/\");\n    }\n  }\n\n  toMain = () => {\n    const { history } = this.props;\n    if (history) history.push(\"/main\");\n  };\n\n  onClickId = id => {\n    const { dispatch, history, p2p } = this.props;\n    if (id !== p2p.kad.nodeId) {\n      setConditionValue(Icondition.findUser, id, dispatch);\n      history.push(\"/user\");\n    }\n  };\n\n  render() {\n    const { twitter, p2p } = this.props;\n    return (\n      <div>\n        {setAccountContext(\n          { twitter: twitter, follows: twitter[Istate.followIds], p2p },\n          { toMain: this.toMain, onClickId: this.onClickId }\n        )}\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    p2p: state.p2p,\n    twitter: state.twitter\n  };\n};\n\nexport default connect(mapStateToProps)(Account);\n","import React, { Component } from \"react\";\nimport { IconButton, Button } from \"@material-ui/core\";\nimport { AccountCircle } from \"@material-ui/icons\";\nimport { Consumer } from \"./index\";\n\nexport default class FormBadge extends Component {\n  toAccount = () => {\n    const { history } = this.props;\n    console.log(\"this.props\", this.props);\n    if (history) history.push(\"/account\");\n  };\n\n  render() {\n    return (\n      <Consumer>\n        {context => {\n          context = context || {\n            func: { toDm: () => {}, follow: () => {} },\n            val: { id: \"\" }\n          };\n\n          return (\n            <div\n              style={{\n                border: \"1px solid\",\n                borderRadius: 4,\n                borderWidth: 0.5,\n                borderColor: \"#d6d7da\"\n              }}\n            >\n              <IconButton>\n                <AccountCircle />\n              </IconButton>\n              <Button>{context.val.id}</Button>\n              <br />\n              <div style={{ display: \"flex\", justifyContent: \"flex-end\" }}>\n                <Button\n                  onClick={() => {\n                    context.func.follow(context.val.id);\n                  }}\n                >\n                  follow\n                </Button>\n                <Button\n                  onClick={() => {\n                    context.func.toDm(context.val.id);\n                  }}\n                >\n                  dm\n                </Button>\n              </div>\n            </div>\n          );\n        }}\n      </Consumer>\n    );\n  }\n}\n","import React, { Component, createContext } from \"react\";\nimport { IconButton } from \"@material-ui/core\";\nimport { ArrowBack } from \"@material-ui/icons\";\nimport { setTimeline } from \"../../components/common/timelline\";\nimport FormBadge from \"./badge\";\n\nconst Context = createContext();\nexport const { Provider, Consumer } = Context;\n\nexport class UserContext extends Component {\n  render() {\n    const { value, func } = this.props;\n    return (\n      <Provider value={{ func, val: value }}>\n        <IconButton onClick={func.toMain} style={{ marginLeft: \"auto\" }}>\n          <ArrowBack />\n        </IconButton>\n        <div style={{ display: \"flex\" }}>\n          <div style={{ width: 500 }}>\n            <FormBadge />\n          </div>\n          <div style={{ flex: 1 }}>\n            <div>user post</div>\n            {setTimeline(value.timeline, value.p2p)}\n          </div>\n        </div>\n      </Provider>\n    );\n  }\n}\n\nexport default function setUserContext(\n  value = { timeline: [], id: \"\", p2p: undefined },\n  func = { toMain: () => {}, follow: () => {}, toDm: () => {} }\n) {\n  return <UserContext value={value} func={func} />;\n}\n","import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { findTweet, initialState, follow } from \"../modules/twitter\";\nimport setUserContext from \"../components/user\";\nimport { setConditionValue, Icondition } from \"../modules/condition\";\n\nclass User extends Component {\n  constructor(props) {\n    super(props);\n    const { p2p, history } = this.props;\n    if (!p2p.kad) {\n      history.push(\"/\");\n    }\n  }\n\n  async componentDidMount() {\n    const { condition, p2p, dispatch } = this.props;\n    findTweet(condition.findUser, p2p.kad, dispatch);\n  }\n\n  toMain = () => {\n    const { history } = this.props;\n    if (history) history.push(\"/main\");\n  };\n\n  toDm = id => {\n    const { history, dispatch } = this.props;\n    setConditionValue(Icondition.dmUserId, id, dispatch);\n    if (history) history.push(\"/dm\");\n  };\n\n  getTargetTweets(target, state = initialState) {\n    const tweets = [];\n    state.timeline.forEach(tweet => {\n      if (tweet.id === target) {\n        tweets.push(tweet);\n      }\n    });\n    return tweets;\n  }\n\n  follow = id => {\n    const { dispatch } = this.props;\n    follow(id, dispatch);\n  };\n\n  render() {\n    const { twitter, condition, p2p } = this.props;\n    const tweets = this.getTargetTweets(condition.findUser, twitter);\n\n    return (\n      <div>\n        {setUserContext(\n          { timeline: tweets, id: condition.findUser, p2p },\n          { toMain: this.toMain, follow: this.follow, toDm: this.toDm }\n        )}\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    p2p: state.p2p,\n    twitter: state.twitter,\n    condition: state.condition\n  };\n};\n\nexport default connect(mapStateToProps)(User);\n","import React, { Component } from \"react\";\nimport WebRTC from \"webrtc4me\";\nimport Stream, { getLocalStream } from \"webrtc4me/lib/stream\";\n\nexport class VideoChat extends Component {\n  state = { videoSrc: undefined, localSrc: undefined };\n  peer = {};\n  closeModal = () => {};\n\n  setProps(props) {\n    const { val, func } = props;\n    if (val && func) {\n      this.peer = val.videochat_peer;\n      this.closeModal = val.videochat_closeModal;\n    }\n  }\n\n  componentDidMount() {\n    this.setProps(this.props);\n    console.log(\"videochat didmount\", this.peer);\n    const connectStream = async (peer = new WebRTC()) => {\n      const local = await getLocalStream();\n      console.log(\"videochat didmout\", { peer });\n      const stream = new Stream(peer, local);\n      stream.stream = media => {\n        console.log(\"videochat\", { media });\n        this.video.srcObject = media;\n      };\n    };\n    connectStream(this.peer);\n  }\n\n  render() {\n    console.log(\"media\", this.state.videoSrc, this.state.localSrc);\n    return (\n      <div\n        style={{\n          flex: \"0 1 auto\",\n          margin: \"auto\"\n        }}\n      >\n        <video\n          ref={video => {\n            this.video = video;\n          }}\n          autoPlay={true}\n          style={{ width: \"100%\", height: \"100%\" }}\n        />\n      </div>\n    );\n  }\n}\n\nexport default function setVideoChat(\n  val = { videochat_peer: {} },\n  func = { videochat_closeModal: () => {} }\n) {\n  console.log(\"setvideochat\", { val }, { func });\n  return <VideoChat val={val} func={func} />;\n}\n","import React, { Component } from \"react\";\nimport \"react-chat-elements/dist/main.css\";\nimport { MessageList } from \"react-chat-elements\";\nimport { TextField, Button, Modal, IconButton } from \"@material-ui/core\";\nimport setBtnPicFile from \"../main/header/btnPicFile\";\nimport setVideoChat from \"../common/videoChat\";\nimport { Close, ArrowBack } from \"@material-ui/icons\";\nimport WebRTC from \"webrtc4me\";\n\nexport class FormDmChat extends Component {\n  state = { text: \"\", videoModal: false };\n\n  toAccount = () => {\n    const { history } = this.props;\n    console.log(\"this.props\", this.props);\n    if (history) history.push(\"/account\");\n  };\n\n  state = {\n    messageList: []\n  };\n\n  sendComment = () => {};\n  toMain = () => {};\n  selectFile;\n  selectFilename;\n  dataSource;\n  peer = {};\n\n  openVideoModal = () => {\n    this.setState({ videoModal: true });\n    const send = (peer = new WebRTC()) => {\n      peer.send(\"openVideo\", \"chat_video\");\n    };\n    send(this.peer);\n  };\n\n  closeVideoModal = () => {\n    this.setState({ videoModal: false });\n    const send = (peer = new WebRTC()) => {\n      peer.send(\"closeVideo\", \"chat_video\");\n    };\n    send(this.peer);\n  };\n\n  render() {\n    const { value, func } = this.props;\n    if (value && func) {\n      this.sendComment = func.sendComment;\n      this.toMain = func.toMain;\n      this.peer = value.chat_peer;\n\n      const listenPeer = (peer = new WebRTC()) => {\n        peer.events.data[\"chat.js\"] = raw => {\n          if (raw.label === \"chat_video\") {\n            if (raw.data === \"openVideo\") this.setState({ videoModal: true });\n            else if (raw.data === \"closeVideo\") {\n              this.setState({ videoModal: false });\n            }\n          }\n        };\n      };\n      listenPeer(this.peer);\n\n      const messageArr = value.messages[value.nodeId];\n      if (messageArr)\n        this.dataSource = messageArr.map(message => {\n          console.log({ messagefile: new Blob(message.file) });\n          const position = message.type === \"me\" ? \"right\" : \"left\";\n          if (message.text) {\n            const text = message.text;\n            return {\n              position,\n              type: \"text\",\n              text,\n              date: new Date()\n            };\n          } else {\n            const text = \"file\";\n            const data = {\n              uri: window.URL.createObjectURL(new Blob(message.file)),\n              blob: new Blob(message.file),\n              status: {\n                click: true,\n                loading: 1\n              },\n              size: `${new Blob(message.file).size / 1000}kb`,\n              width: 300,\n              height: 300\n            };\n            return {\n              position,\n              type: \"file\",\n              filename: message.filename,\n              status: \"send\",\n              text,\n              data,\n              onDownload: () => {\n                console.log(\"ondownload\");\n              },\n              date: new Date()\n            };\n          }\n        });\n    }\n    return (\n      <div>\n        <IconButton onClick={this.toMain}>\n          <ArrowBack />\n        </IconButton>\n        <div\n          style={{\n            display: \"flex\",\n            flexDirection: \"column\",\n            minHeight: \"90vh\"\n          }}\n        >\n          <MessageList\n            className=\"message-list\"\n            lockable={true}\n            toBottomHeight={\"100%\"}\n            dataSource={this.dataSource}\n            onClick={object => {\n              console.log({ object });\n              if (object.type === \"file\") {\n                const templink = document.createElement(\"a\");\n                templink.href = object.data.uri;\n                templink.download = object.filename;\n                templink.style.display = \"none\";\n                document.body.appendChild(templink);\n                templink.click();\n                document.body.removeChild(templink);\n              }\n            }}\n          />\n          <div style={{ width: \"100%\", marginTop: \"auto\" }}>\n            <TextField\n              label=\"comment\"\n              multiline\n              margin=\"normal\"\n              variant=\"outlined\"\n              rows=\"3\"\n              value={this.state.text}\n              onChange={e => this.setState({ text: e.target.value })}\n              style={{ width: \"100%\" }}\n            />\n            <br />\n            <Button onClick={this.openVideoModal}>video </Button>\n            <div style={{ float: \"right\", display: \"flex\" }}>\n              {setBtnPicFile(\n                { btnpicfile_label: \"file\" },\n                {\n                  btnpicfile_set: (file, filename) => {\n                    console.log(\"chat pic\", filename);\n                    this.selectFile = file;\n                    this.selectFilename = filename;\n                  }\n                }\n              )}\n              <Button\n                onClick={() => {\n                  this.sendComment({\n                    text: this.state.text,\n                    file: this.selectFile,\n                    filename: this.selectFilename\n                  });\n                  this.setState({ text: \"\" });\n                }}\n              >\n                comment\n              </Button>\n            </div>\n            <Modal\n              aria-labelledby=\"simple-modal-title\"\n              aria-describedby=\"simple-modal-description\"\n              open={this.state.videoModal}\n              onClose={() => {\n                // this.setState({ videoModal: false });\n                this.closeVideoModal();\n              }}\n              style={{ display: \"flex\" }}\n            >\n              <div\n                style={{\n                  width: \"70%\",\n                  height: \"70%\",\n                  flex: \"0 1 auto\",\n                  margin: \"auto\",\n                  background: \"white\"\n                }}\n              >\n                <IconButton\n                  onClick={() => {\n                    // this.setState({ videoModal: false });\n                    this.closeVideoModal();\n                  }}\n                  style={{ float: \"right\" }}\n                >\n                  <Close />\n                </IconButton>\n                {setVideoChat({ videochat_peer: this.peer }, {})}\n              </div>\n            </Modal>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default function setFormDmChat(\n  value = { messages: {}, nodeId: \"\", chat_peer: {} },\n  func = { sendComment: () => {}, toMain: () => {} }\n) {\n  return <FormDmChat value={value} func={func} />;\n}\n","import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { initialState } from \"../modules/condition\";\nimport setFormDmChat from \"../components/dm/chat\";\nimport { sendComment } from \"../modules/dm\";\nimport Kademlia from \"kad-rtc\";\nimport { toMain } from \"../domain/route\";\n\nclass DM extends Component {\n  constructor(props) {\n    super(props);\n    const { p2p, history } = this.props;\n    if (!p2p.kad) {\n      history.push(\"/\");\n    }\n  }\n\n  renderId(condition = initialState) {\n    return <div>{condition.dmUserId}</div>;\n  }\n\n  sendComment = payload => {\n    const { condition, p2p, dispatch } = this.props;\n    console.log(\"sendcomment\", { payload });\n    sendComment(condition.dmUserId, payload.text, p2p.kad, dispatch, {\n      file: payload.file,\n      filename: payload.filename\n    });\n  };\n\n  toMain = () => {\n    toMain(this.props);\n  };\n\n  render() {\n    const { condition, dm, p2p } = this.props;\n    const getPeer = (kad = new Kademlia(), id) => {\n      return kad.f.getPeerFromnodeId(id);\n    };\n    return (\n      <div>\n        {this.renderId(condition)}\n        {setFormDmChat(\n          {\n            messages: dm.messages,\n            nodeId: condition.dmUserId,\n            chat_peer: getPeer(p2p.kad, condition.dmUserId)\n          },\n          { sendComment: this.sendComment, toMain: this.toMain }\n        )}\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    p2p: state.p2p,\n    twitter: state.twitter,\n    condition: state.condition,\n    dm: state.dm\n  };\n};\n\nexport default connect(mapStateToProps)(DM);\n","import React from \"react\";\nimport { render } from \"react-dom\";\nimport { Provider } from \"react-redux\";\nimport createStore from \"./createStore\";\n\nimport { HashRouter as Router, Route } from \"react-router-dom\";\nimport WatchLive from \"./pages/main\";\nimport Login from \"./pages/login\";\nimport Account from \"./pages/account\";\nimport User from \"./pages/user\";\nimport DM from \"./pages/dm\";\n\nconst data = createStore();\n\nrender(\n  <Provider store={data.store}>\n    <Router>\n      <div>\n        <Route exact path=\"/\" component={Login} />\n        <Route path=\"/main\" component={WatchLive} />\n        <Route path=\"/account\" component={Account} />\n        <Route path=\"/user\" component={User} />\n        <Route path=\"/dm\" component={DM} />\n      </div>\n    </Router>\n  </Provider>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}